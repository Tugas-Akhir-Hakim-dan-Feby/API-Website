import{L as V}from"./Loader-c4a25092.js";import{P as E}from"./PageTitle-01df425d.js";import{P as I}from"./Pagination-19014d10.js";import{S as N}from"./Success-e6c7690f.js";import{C as j}from"./Confirm-37323e9f.js";import{P as x}from"./pagination-8c4016f1.js";import{U as A}from"./util-54581a61.js";import{d as p}from"./id-74eac58a.js";import{_ as H,r as d,o as i,c as r,b as h,w as f,a as t,d as m,t as b,f as c,g as P,k as M,v as S,F as k,l as D,m as W,x as Y,y as B}from"./app-ecfa6876.js";import{r as O}from"./relativeTime-d816e2f2.js";const F={data(){return{uuid:"",jobVacancies:null,roles:null,metaPagination:{},pagination:{perPage:10,page:1},filters:{search:""},isLoading:!1}},mounted(){this.getUser(),this.getJobVacancies()},methods:{iteration(e){return x.iteration(e,this.metaPagination)},getUser(){this.$store.dispatch("showData",["user","me"]).then(e=>{this.roles=e.roles}).catch(e=>{})},getJobVacancies(){this.isLoading=!0;let e=[`per_page=${this.pagination.perPage}`,`page=${this.pagination.page}`,`search=${this.filters.search}`].join("&");this.$store.dispatch("getData",["job-vacancy",e]).then(n=>{this.isLoading=!1,this.jobVacancies=n.data,this.metaPagination=n.meta}).catch(n=>{this.isLoading=!1})},getDeadline(e){return p(e).locale("id").format("DD MMMM YYYY")},getRupiah(e){return A.getRupiah(e)},onPageChange(e){this.pagination.page=e,this.getJobVacancies()},onDelete(){this.isLoading=!0,$("#confirmModal").modal("hide"),this.$store.dispatch("deleteData",["job-vacancy",this.uuid]).then(e=>{this.getJobVacancies(),this.isLoading=!1,this.msg="data berhasil dihapus.",$("#successModal").modal("show")}).catch(e=>{this.isLoading=!1})},onSearch(){setTimeout(()=>{this.getJobVacancies()},1e3)},handleDelete(e){this.uuid=e,this.msg="apakah anda yakin data ini akan dihapus?",$("#confirmModal").modal("show")},checkRoleAdminApp(e){e&&e.forEach(n=>!!(this.roles&&this.roles.includes(n)))}},components:{PageTitle:E,Pagination:I,Loader:V,Success:N,Confirm:j}},G={class:"breadcrumb m-0"},q={class:"breadcrumb-item"},z=t("li",{class:"breadcrumb-item active"},"Lowongan Pekerjaan",-1),K={key:0,class:"alert alert-warning"},Q={class:"card position-relative"},X={class:"card-body"},Z={class:"d-md-flex d-block justify-content-between align-items-center mb-2"},ee={class:"text-center"},te={class:"d-md-flex justify-content-between align-items-center"},ne={class:"me-md-2 me-0"},se={class:"table-responsive"},ae={class:"table table-hover table-bordered"},ie=t("th",null,"No.",-1),oe={key:0},le=t("th",null,"Jenis Lowongan",-1),re=t("th",null,"Jenis Pekerjaan",-1),ce=t("th",null,"Penempatan",-1),de=t("th",null,"Perkiraan Gaji",-1),he=t("th",null,"Waktu Penutupan",-1),ue=t("th",null,"Jumlah Pendaftar",-1),me=t("th",null,"Aksi",-1),ge={key:0},_e=["colspan"],pe=["innerHTML"],fe=["innerHTML"],be=["innerHTML"],ke=["innerHTML"],ve=["innerHTML"],Le=["innerHTML"],Pe=["innerHTML"],Te=["onClick"];function ye(e,n,T,R,a,o){const u=d("router-link"),g=d("PageTitle"),w=d("Loader"),s=d("Pagination"),v=d("Success"),y=d("Confirm");return i(),r(k,null,[h(g,{title:"Lowongan Pekerjaan"},{default:f(()=>[t("ol",G,[t("li",q,[h(u,{to:{name:"Dashboard"}},{default:f(()=>[m("Dashboard")]),_:1})]),z])]),_:1}),a.jobVacancies&&e.$can("info","Jobvacancy")?(i(),r("div",K,[m(" Limit postingan anda tersisa "),t("strong",null,b(4-a.jobVacancies.length),1),m(". ")])):c("",!0),t("div",Q,[a.isLoading?(i(),P(w,{key:0})):c("",!0),t("div",X,[t("div",Z,[t("div",ee,[a.jobVacancies&&a.jobVacancies.length<4&&e.$can("create","Jobvacancy")?(i(),P(u,{key:0,to:{name:"Job Vacancy Create"},class:"btn btn-sm btn-primary mb-2"},{default:f(()=>[m(" Tambah Lowongan ")]),_:1})):c("",!0)]),t("div",te,[t("div",ne,[M(t("input",{type:"search",class:"form-control",placeholder:"Pencarian","onUpdate:modelValue":n[0]||(n[0]=l=>a.filters.search=l),onInput:n[1]||(n[1]=l=>o.onSearch())},null,544),[[S,a.filters.search]])]),h(s,{pagination:a.metaPagination,onOnPageChange:n[2]||(n[2]=l=>o.onPageChange(l))},null,8,["pagination"])])]),t("div",se,[t("table",ae,[t("thead",null,[t("tr",null,[ie,e.$can("info","Jobvacancy")?c("",!0):(i(),r("th",oe," Nama Perusahaan ")),le,re,ce,de,he,ue,me])]),t("tbody",null,[a.jobVacancies&&a.jobVacancies.length<1?(i(),r("tr",ge,[t("td",{class:"text-center",colspan:e.$can("info","Jobvacancy")?8:9}," Data lowongan pekerjaan tidak ada. ",8,_e)])):(i(!0),r(k,{key:1},D(a.jobVacancies,(l,L)=>{var _,U;return i(),r("tr",{key:L},[t("th",{innerHTML:o.iteration(L)},null,8,pe),e.$can("info","Jobvacancy")?c("",!0):(i(),r("td",{key:0,innerHTML:(_=l.companyMember)==null?void 0:_.companyName},null,8,fe)),t("td",{innerHTML:(U=l.welderSkill)==null?void 0:U.skillName},null,8,be),t("td",{innerHTML:l.workType},null,8,ke),t("td",{innerHTML:l.placement},null,8,ve),t("td",{innerHTML:o.getRupiah(l.salary)},null,8,Le),t("td",{innerHTML:o.getDeadline(l.deadline)},null,8,Pe),t("td",null,[h(u,{to:{name:"Job Vacancy Participant",params:{uuid:l.uuid}},class:"badge btn-info"},{default:f(()=>{var J;return[m(b((J=l.registerJobs)==null?void 0:J.length)+" Pendaftar",1)]}),_:2},1032,["to"])]),t("td",null,[e.$can("update","Jobvacancy")?(i(),P(u,{key:0,to:{name:"Job Vacancy Edit",params:{id:l.uuid}},class:"btn btn-sm btn-warning text-white me-2"},{default:f(()=>[m("Edit")]),_:2},1032,["to"])):c("",!0),e.$can("delete","Jobvacancy")?(i(),r("button",{key:1,onClick:J=>o.handleDelete(l.uuid),class:"btn btn-sm btn-danger text-white"}," Hapus ",8,Te)):c("",!0)])])}),128))])])])])]),h(v,{url:{name:"Job Vacancy"},msg:e.msg},null,8,["msg"]),h(y,{onOnDelete:o.onDelete,msg:e.msg},null,8,["onOnDelete","msg"])],64)}const Me=H(F,[["render",ye]]);const we={data(){return{isLoading:!1,isRegistered:!1,jobVacancies:[],pagination:{page:1,perPage:10},filters:{search:"",skill:"",region:""},metaPagination:{},welderSkills:[]}},mounted(){this.getWelderSkills(),this.getJobVacancies()},methods:{getWelderSkills(){this.$store.dispatch("getData",["skill/welder",""]).then(e=>{this.welderSkills=e.data})},getJobVacancies(){this.isLoading=!0;let e=[`page=${this.pagination.page}`,`per_page=${this.pagination.perPage}`,`search=${this.filters.search}`,`skill=${this.filters.skill}`,`region=${this.filters.region}`].join("&");this.$store.dispatch("getData",["job-vacancy",e]).then(n=>{this.isLoading=!1,this.jobVacancies=n.data,this.metaPagination=n.meta}).catch(n=>{this.isLoading=!1})},getCreatedAt(e){return p.extend(O),e=p(e).locale("id"),e.fromNow()},getDeadline(e){return e=p(e).locale("id"),e.format("DD MMMM YYYY")},getCloseDeadline(e){return e=p(e).locale("id"),!e.isSame(p(),"day")},checkJobRegister(e){},redirectTo(e){this.$router.push(e)},onPageChange(e){this.pagination.page=e,this.getJobVacancies()},onSearch(){setTimeout(()=>{this.getJobVacancies()},1e3)},onSearchSkill(){setTimeout(()=>{this.getJobVacancies()},1e3)},onSearchRegion(){setTimeout(()=>{this.getJobVacancies()},1e3)}},components:{PageTitle:E,Loader:V,Pagination:I}},C=e=>(Y("data-v-54e6e083"),e=e(),B(),e),$e={class:"d-md-flex align-items-center justify-content-between"},Je={class:"row"},Se={class:"col-md-4 mb-3"},De={class:"col-md-4 mb-3"},He={class:"col-md-4 mb-3"},Ce=C(()=>t("option",{selected:"",disabled:"",value:""}," Spesialisasi pekerjaan ",-1)),Re=["value","innerHTML"],Ue={key:0,class:"alert alert-warning text-center"},Ve={key:1,class:"alert alert-primary"},Ee=["onClick"],Ie={class:"card-body"},Ne={class:"d-flex justify-content-between"},je=["src","alt"],xe=["innerHTML"],Ae={key:0,class:"btn btn-sm btn-success"},We={class:"row mt-2"},Ye={class:"col-lg-6 col-md-6 col-sm-6"},Be={class:"fw-normal d-inline d-sm-none"},Oe=["innerHTML"],Fe=["innerHTML"],Ge=["innerHTML"],qe={class:"col-lg-6 col-md-6 col-sm-6 d-none d-sm-block"},ze=C(()=>t("h5",null,[t("b",null,"Jenis Pekerjaan")],-1)),Ke=["innerHTML"],Qe=C(()=>t("h5",null,[t("b",null,"Waktu Penutupan")],-1)),Xe=["innerHTML"],Ze={class:"d-flex justify-content-end"};function et(e,n,T,R,a,o){const u=d("PageTitle"),g=d("Pagination"),w=d("router-link");return i(),r(k,null,[t("div",$e,[h(u,{title:"Lowongan Pekerjaan"}),h(g,{pagination:a.metaPagination,onOnPageChange:n[0]||(n[0]=s=>o.onPageChange(s))},null,8,["pagination"])]),t("div",Je,[t("div",Se,[M(t("input",{type:"search",class:"form-control",placeholder:"Jabatan / kata kunci / perusahaan","onUpdate:modelValue":n[1]||(n[1]=s=>a.filters.search=s),onInput:n[2]||(n[2]=s=>o.onSearch())},null,544),[[S,a.filters.search]])]),t("div",De,[M(t("input",{type:"search",class:"form-control",placeholder:"Daerah / kota / kabupaten","onUpdate:modelValue":n[3]||(n[3]=s=>a.filters.region=s),onInput:n[4]||(n[4]=s=>o.onSearchRegion())},null,544),[[S,a.filters.region]])]),t("div",He,[M(t("select",{class:"form-select","onUpdate:modelValue":n[5]||(n[5]=s=>a.filters.skill=s),onChange:n[6]||(n[6]=s=>o.onSearchSkill())},[Ce,(i(!0),r(k,null,D(a.welderSkills,(s,v)=>(i(),r("option",{key:v,value:s.uuid,innerHTML:s.skillName},null,8,Re))),128))],544),[[W,a.filters.skill]])])]),a.isLoading?(i(),r("div",Ue," harap tunggu... ")):c("",!0),a.jobVacancies.length<1&&!a.isLoading?(i(),r("div",Ve," lowongan pekerjaan belum tersedia... ")):c("",!0),(i(!0),r(k,null,D(a.jobVacancies,(s,v)=>{var y,l,L;return i(),r("div",{key:v},[o.getCloseDeadline(s.deadline)?(i(),r("div",{key:0,class:"card border-start",onClick:_=>o.redirectTo({name:"Job Vacancy Detail",params:{slug:s.slug}})},[t("div",Ie,[t("div",Ne,[t("img",{src:(y=s.companyMember)==null?void 0:y.companyLogo,alt:(l=s.companyMember)==null?void 0:l.companyName,style:{"max-width":"300px","max-height":"75px"}},null,8,je),t("div",null,[t("p",{class:"d-inline d-sm-none fw-bold",innerHTML:o.getDeadline(s.deadline)},null,8,xe),o.checkJobRegister(s.uuid)?(i(),r("p",Ae,b(a.isRegistered)+" Lamaran Terkirim ",1)):c("",!0),m(" "+b(o.checkJobRegister(s.uuid)),1)])]),t("div",We,[t("div",Ye,[t("h4",null,[h(w,{to:"/"},{default:f(()=>{var _;return[m(b((_=s.welderSkill)==null?void 0:_.skillName),1)]}),_:2},1024),t("small",Be,"Â  ("+b(s.workType)+")",1)]),t("p",{innerHTML:(L=s.companyMember)==null?void 0:L.companyName},null,8,Oe),t("h5",null,[t("b",{innerHTML:s.placement},null,8,Fe)]),t("p",{innerHTML:o.getCreatedAt(s.createdAt)},null,8,Ge)]),t("div",qe,[t("div",null,[ze,t("p",{innerHTML:s.workType},null,8,Ke),Qe,t("p",{innerHTML:o.getDeadline(s.deadline)},null,8,Xe)])])])])],8,Ee)):c("",!0)])}),128)),t("div",Ze,[h(g,{pagination:a.metaPagination,onOnPageChange:n[7]||(n[7]=s=>o.onPageChange(s))},null,8,["pagination"])])],64)}const tt=H(we,[["render",et],["__scopeId","data-v-54e6e083"]]),nt={data(){return{roles:null}},mounted(){this.getUser()},methods:{getUser(){this.$store.dispatch("showData",["user","me"]).then(e=>{this.roles=e.roles}).catch(e=>{})},checkRoleAccess(e){let n=!1;return e&&e.forEach(T=>{this.roles&&this.roles.includes(T)&&this.$can("index-welder","Jobvacancy")&&(n=!0)}),n}},components:{Admin:Me,Welder:tt}};function st(e,n,T,R,a,o){const u=d("Admin"),g=d("Welder");return i(),r(k,null,[e.$can("index-admin","Jobvacancy")&&(e.$store.state.USER.roleId==5||e.$store.state.USER.roleId==1||e.$store.state.USER.roleId==2)?(i(),P(u,{key:0})):c("",!0),o.checkRoleAccess([e.$store.state.MEMBER_WELDER,e.$store.state.GUEST])&&e.$store.state.USER.roleId!=5?(i(),P(g,{key:1})):c("",!0)],64)}const gt=H(nt,[["render",st]]);export{gt as default};
