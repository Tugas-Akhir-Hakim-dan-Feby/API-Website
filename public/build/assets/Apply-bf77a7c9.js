import{L as B}from"./Loader-adc66e3a.js";import{S as x}from"./Success-04ed925e.js";import{P as N}from"./PageTitle-7945d5aa.js";import{_ as I,e as z,r as g,o as r,c as n,b as C,a as s,k as _,v,n as h,F as c,l as u,t as a,f as d,m as b,w as T,d as k,j as R,g as w}from"./app-5009bbee.js";import{U as A}from"./util-54581a61.js";const E={props:["slug"],data(){return{isLoading:!1,form:{welderSkillIds:[],residentIdCard:"",dateBirth:"",birthPlace:"",citizenship:"",village:"",district:"",regency:"",province:"",zipCode:"",phone:"",workingStatus:"",documentPasPhoto:"",documentCurriculumVitae:"",documentCertificateCompetency:""},isRegency:!0,isDistrict:!0,isVillage:!0,errors:{},provinces:[],regencies:[],districts:[],villages:[]}},computed:{maxDateBirth(){let o=new Date;return o.setFullYear(o.getFullYear()-15),o.setMonth(o.getMonth()),o.setDate(o.getDate()),o.toISOString().split("T")[0]},formData(){let o=new FormData;for(let i=0;i<this.form.welderSkillIds.length;i++)o.append(`welder_skill_ids[${i}]`,this.form.welderSkillIds[i]);return o.append("resident_id_card",this.form.residentIdCard),o.append("date_birth",this.form.dateBirth),o.append("birth_place",this.form.birthPlace),o.append("citizenship",this.form.citizenship),o.append("village",this.form.village),o.append("district",this.form.district),o.append("regency",this.form.regency),o.append("province",this.form.province),o.append("zip_code",this.form.zipCode),o.append("phone",this.form.phone),o.append("document_curriculum_vitae",this.form.documentCurriculumVitae),o.append("working_status",this.form.workingStatus),o.append("document_pas_photo",this.form.documentPasPhoto),o.append("document_certificate_competency",this.form.documentCertificateCompetency),o}},mounted(){this.getProvince(),this.getWelderSkills()},methods:{getProvince(){fetch(this.$store.state.BASE_URL_REGION+"provinces.json").then(o=>o.json()).then(o=>{this.provinces=o})},getRegency(o){fetch(`${this.$store.state.BASE_URL_REGION}regencies/${o.target.value}.json`).then(i=>i.json()).then(i=>{this.regencies=i,this.$refs.regency.value=""})},getDistrict(o){fetch(`${this.$store.state.BASE_URL_REGION}districts/${o.target.value}.json`).then(i=>i.json()).then(i=>{this.districts=i,this.$refs.district.value=""})},getVillage(o){fetch(`${this.$store.state.BASE_URL_REGION}villages/${o.target.value}.json`).then(i=>i.json()).then(i=>{this.villages=i,this.$refs.village.value=""})},getWelderSkills(){$(this.$refs.welderSkill).select2({ajax:{url:`${this.$store.state.BASE_URL}/api/v1/skill/welder`,dataType:"json",headers:{Authorization:"Bearer "+z.get("token")},delay:250,data:function(o){return{search:o.term,per_page:20}},processResults:function(o){return{results:o.data.map(i=>({id:i.uuid,text:i.skill_name}))}},cache:!0}}),$(this.$refs.welderSkill).on("change",()=>{this.form.welderSkillIds=$(this.$refs.welderSkill).val(),$(".select2-hidden-accessible").removeClass("is-invalid")})},handleSubmit(){this.isLoading=!0,this.$store.dispatch("postDataUpload",["user/personal-data",this.formData]).then(o=>{this.isLoading=!1,$("#successModal").modal("show")}).catch(o=>{this.isLoading=!1,this.errors=o.response.data.messages})},onBack(){this.$router.push({name:"Job Vacancy Detail",params:{slug:this.slug}})},onOk(){this.$emit("onSuccess",!0)},uploadCurriculumVitae(o){this.form.documentCurriculumVitae=o.target.files[0]},uploadPasPhoto(o){this.form.documentPasPhoto=o.target.files[0]},uploadCertificateCompetency(o){this.form.documentCertificateCompetency=o.target.files[0]}},components:{PageTitle:N,Loader:B,Success:x}},K={class:"card"},M={class:"card-body"},O={class:"row"},J={class:"col-md-6"},F={class:"mb-3"},W=s("label",null,"NIK",-1),G=["disabled"],H={class:"col-md-6"},Y={class:"mb-3"},q=s("label",null,"Status Bekerja",-1),Q=["disabled"],X=s("option",{disabled:"",selected:""},null,-1),Z=s("option",{value:"1"},"Sudah Pernah Bekerja",-1),ee=s("option",{value:"0"},"Belum Pernah Bekerja",-1),se=[X,Z,ee],te={class:"col-md-6"},ie={class:"mb-3"},oe=s("label",null,"Tempat Lahir",-1),re=["disabled"],ne={class:"col-md-6"},le={class:"mb-3"},ae=s("label",null,"Tanggal Lahir",-1),de=["disabled","max"],ce={class:"col-md-6"},ue={class:"mb-3"},me=s("label",null,"Jenis Kompetensi",-1),he=["disabled"],pe={class:"col-md-6"},_e={class:"mb-3"},be=s("label",null,"Kewarganegaraan",-1),ve=["disabled"],ge=s("option",{disabled:"",selected:""},null,-1),fe=s("option",{value:"WNI"}," Warga Negara Indonesia ",-1),ke=s("option",{value:"WNA"},"Warga Negara Asing",-1),ye=[ge,fe,ke],Pe={class:"col-md-6"},Se={class:"mb-3"},Ce=s("label",null,"Provinsi",-1),we=["disabled"],Ve=s("option",{disabled:"",selected:""},null,-1),De=["value"],Le={class:"col-md-6"},je={class:"mb-3"},Be=s("label",null,"Kota/Kabupaten",-1),xe=["disabled"],Ne=s("option",{disabled:"",selected:""},null,-1),Ie=["value"],Re={class:"col-md-6"},Ue={class:"mb-3"},ze=s("label",null,"Kecamatan",-1),Te=["disabled"],Ae=s("option",{disabled:"",selected:""},null,-1),Ee=["value"],Ke={class:"col-md-6"},Me={class:"mb-3"},Oe=s("label",null,"Desa/Kelurahan",-1),Je=["disabled"],Fe=s("option",{disabled:"",selected:""},null,-1),We=["value"],Ge={class:"col-md-6"},He={class:"mb-3"},Ye=s("label",null,"Kode Pos",-1),qe=["disabled"],Qe={class:"col-md-6"},Xe={class:"mb-3"},Ze=s("label",null,"No Telepon",-1),$e=["disabled"],es={class:"col-md-6"},ss={class:"mb-3"},ts=s("label",null,"Pas Foto Formal Berwarna",-1),is=["disabled"],os={class:"col-md-6"},rs={class:"mb-3"},ns=s("label",null,"Sertifikat Pelatihan/Kompetensi Keahlian Pengelasan ",-1),ls=["disabled"],as={class:"col-md-6"},ds={class:"mb-3"},cs=s("label",null,"Daftar Riwayat Hidup",-1),us=["disabled"],ms={class:"card-footer d-flex justify-content-between"},hs={key:0,class:"btn btn-sm btn-primary"},ps={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},_s=s("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function bs(o,i,V,U,e,m){const y=g("PageTitle"),P=g("router-link"),S=g("Success");return r(),n(c,null,[C(y,{title:"Data Diri Pekerja",isBack:!0,onOnBack:i[0]||(i[0]=t=>m.onBack())}),s("form",{onSubmit:i[18]||(i[18]=R((...t)=>m.handleSubmit&&m.handleSubmit(...t),["prevent"])),method:"post"},[s("div",K,[s("div",M,[s("div",O,[s("div",J,[s("div",F,[W,_(s("input",{type:"number",class:h(["form-control",{"is-invalid":e.errors.residentIdCard}]),"onUpdate:modelValue":i[1]||(i[1]=t=>e.form.residentIdCard=t),disabled:e.isLoading},null,10,G),[[v,e.form.residentIdCard]]),e.errors.residentIdCard?(r(!0),n(c,{key:0},u(e.errors.residentIdCard,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",H,[s("div",Y,[q,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.workingStatus}]),"onUpdate:modelValue":i[2]||(i[2]=t=>e.form.workingStatus=t),disabled:e.isLoading},se,10,Q),[[b,e.form.workingStatus]]),e.errors.workingStatus?(r(!0),n(c,{key:0},u(e.errors.workingStatus,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",te,[s("div",ie,[oe,_(s("input",{type:"text",class:h(["form-control",{"is-invalid":e.errors.birthPlace}]),"onUpdate:modelValue":i[3]||(i[3]=t=>e.form.birthPlace=t),disabled:e.isLoading},null,10,re),[[v,e.form.birthPlace]]),e.errors.birthPlace?(r(!0),n(c,{key:0},u(e.errors.birthPlace,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",ne,[s("div",le,[ae,_(s("input",{type:"date",class:h(["form-control",{"is-invalid":e.errors.dateBirth}]),"onUpdate:modelValue":i[4]||(i[4]=t=>e.form.dateBirth=t),disabled:e.isLoading,max:m.maxDateBirth},null,10,de),[[v,e.form.dateBirth]]),e.errors.dateBirth?(r(!0),n(c,{key:0},u(e.errors.dateBirth,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",ce,[s("div",ue,[me,s("select",{class:h(["select2-hidden-accessible form-select",{"is-invalid":e.errors.welderSkillIds}]),ref:"welderSkill",disabled:e.isLoading,multiple:""},null,10,he),e.errors.welderSkillIds?(r(!0),n(c,{key:0},u(e.errors.welderSkillIds,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",pe,[s("div",_e,[be,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.citizenship}]),"onUpdate:modelValue":i[5]||(i[5]=t=>e.form.citizenship=t),disabled:e.isLoading},ye,10,ve),[[b,e.form.citizenship]]),e.errors.citizenship?(r(!0),n(c,{key:0},u(e.errors.citizenship,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",Pe,[s("div",Se,[Ce,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.province}]),"onUpdate:modelValue":i[6]||(i[6]=t=>e.form.province=t),disabled:e.isLoading,onChange:i[7]||(i[7]=t=>(e.isRegency=!1,m.getRegency(t)))},[Ve,(r(!0),n(c,null,u(e.provinces,(t,l)=>(r(),n("option",{key:l,value:t.id},a(t.name),9,De))),128))],42,we),[[b,e.form.province]]),e.errors.province?(r(!0),n(c,{key:0},u(e.errors.province,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",Le,[s("div",je,[Be,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.regency}]),"onUpdate:modelValue":i[8]||(i[8]=t=>e.form.regency=t),disabled:e.isLoading||e.isRegency,ref:"regency",onChange:i[9]||(i[9]=t=>(e.isDistrict=!1,m.getDistrict(t)))},[Ne,(r(!0),n(c,null,u(e.regencies,(t,l)=>(r(),n("option",{key:l,value:t.id},a(t.name),9,Ie))),128))],42,xe),[[b,e.form.regency]]),e.errors.regency?(r(!0),n(c,{key:0},u(e.errors.regency,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",Re,[s("div",Ue,[ze,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.district}]),"onUpdate:modelValue":i[10]||(i[10]=t=>e.form.district=t),disabled:e.isLoading||e.isDistrict,ref:"district",onChange:i[11]||(i[11]=t=>(e.isVillage=!1,m.getVillage(t)))},[Ae,(r(!0),n(c,null,u(e.districts,(t,l)=>(r(),n("option",{key:l,value:t.id},a(t.name),9,Ee))),128))],42,Te),[[b,e.form.district]]),e.errors.district?(r(!0),n(c,{key:0},u(e.errors.district,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",Ke,[s("div",Me,[Oe,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.village}]),ref:"village","onUpdate:modelValue":i[12]||(i[12]=t=>e.form.village=t),disabled:e.isLoading||e.isVillage},[Fe,(r(!0),n(c,null,u(e.villages,(t,l)=>(r(),n("option",{key:l,value:t.id},a(t.name),9,We))),128))],10,Je),[[b,e.form.village]]),e.errors.village?(r(!0),n(c,{key:0},u(e.errors.village,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",Ge,[s("div",He,[Ye,_(s("input",{type:"text",class:h(["form-control",{"is-invalid":e.errors.zipCode}]),"onUpdate:modelValue":i[13]||(i[13]=t=>e.form.zipCode=t),disabled:e.isLoading},null,10,qe),[[v,e.form.zipCode]]),e.errors.zipCode?(r(!0),n(c,{key:0},u(e.errors.zipCode,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",Qe,[s("div",Xe,[Ze,_(s("input",{type:"number",class:h(["form-control",{"is-invalid":e.errors.phone}]),"onUpdate:modelValue":i[14]||(i[14]=t=>e.form.phone=t),disabled:e.isLoading},null,10,$e),[[v,e.form.phone]]),e.errors.phone?(r(!0),n(c,{key:0},u(e.errors.phone,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",es,[s("div",ss,[ts,s("input",{type:"file",class:h(["form-control",{"is-invalid":e.errors.documentPasPhoto}]),disabled:e.isLoading,onChange:i[15]||(i[15]=(...t)=>m.uploadPasPhoto&&m.uploadPasPhoto(...t))},null,42,is),e.errors.documentPasPhoto?(r(!0),n(c,{key:0},u(e.errors.documentPasPhoto,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",os,[s("div",rs,[ns,s("input",{type:"file",class:h(["form-control",{"is-invalid":e.errors.documentCertificateCompetency}]),disabled:e.isLoading,onChange:i[16]||(i[16]=(...t)=>m.uploadCertificateCompetency&&m.uploadCertificateCompetency(...t))},null,42,ls),e.errors.documentCertificateCompetency?(r(!0),n(c,{key:0},u(e.errors.documentCertificateCompetency,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])]),s("div",as,[s("div",ds,[cs,s("input",{type:"file",class:h(["form-control",{"is-invalid":e.errors.documentCurriculumVitae}]),disabled:e.isLoading,onChange:i[17]||(i[17]=(...t)=>m.uploadCurriculumVitae&&m.uploadCurriculumVitae(...t))},null,42,us),e.errors.documentCurriculumVitae?(r(!0),n(c,{key:0},u(e.errors.documentCurriculumVitae,(t,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(t),1))),128)):d("",!0)])])])]),s("div",ms,[C(P,{to:{name:"Job Vacancy",params:{uuid:o.uuid}},class:"btn btn-sm btn-secondary",disabled:e.isLoading},{default:T(()=>[k("Batal")]),_:1},8,["to","disabled"]),e.isLoading?d("",!0):(r(),n("button",hs," Simpan ")),e.isLoading?(r(),n("button",ps,[_s,k(" Harap Tunggu... ")])):d("",!0)])])],32),C(S,{msg:"data berhasil disimpan."},null,8,["msg"])],64)}const vs=I(E,[["render",bs]]),gs=[{value:"Tidak ada pengalaman"},{value:"Kurang dari 1 tahun"},{value:"1 tahun"},{value:"2 tahun"},{value:"3 tahun"},{value:"4 tahun"},{value:"5 tahun"},{value:"Lebih dari 5 tahun"}],fs={props:["slug"],data(){return{isLoading:!1,isRegistered:0,isNullPersonalData:!1,form:{experience:"",promote:"",jobVacancyId:""},jobVacancy:{},experiences:[],errors:{}}},watch:{isNullPersonalData(o){this.isNullPersonalData=o}},mounted(){this.getUser(),this.getExperience(),this.getJobVacancy()},methods:{getUser(){this.$store.dispatch("showData",["user","me"]).then(o=>{this.getDataPersonal(o.user)}).catch(o=>{})},getExperience(){this.experiences=gs},getDataPersonal(o){this.$store.dispatch("showData",["user/personal-data",o.uuid]).then(i=>{}).catch(i=>{i.response.data.statusCode==404&&i.response.data.status=="WARNING"&&(this.isNullPersonalData=!0)})},getJobVacancy(){this.$store.dispatch("showData",["job-vacancy/show-by-slug",this.slug]).then(o=>{this.jobVacancy=o.data,this.checkJobRegister(o.data.uuid)})},getRupiah(o){return A.getRupiah(o)},handleSubmit(){this.isLoading=!0,this.errors={},this.form.jobVacancyId=this.jobVacancy.uuid,this.$store.dispatch("postData",["register-job",this.form]).then(o=>{this.isLoading=!1,$("#successModal").modal("show")}).catch(o=>{this.isLoading=!1,this.errors=o.response.data.messages})},checkJobRegister(o){this.$store.dispatch("showData",["register-job/check",o]).then(i=>{i&&this.$router.back()})},onSuccess(){this.isNullPersonalData=!1}},components:{PageTitle:N,Loader:B,Success:x,DataPersonal:vs}},ks={key:1},ys={class:"row"},Ps={class:"col-md-4"},Ss={class:"card"},Cs={class:"card-body"},ws={class:"row"},Vs={class:"col-md-4 col-sm-12"},Ds=["src","alt"],Ls={class:"col-md-8 col-sm-12"},js={class:"mt-md-0"},Bs=s("p",{class:"fw-bold m-0"},"Perkiraan Gaji",-1),xs=s("p",{class:"fw-bold m-0"},"Jenis Pekerjaan",-1),Ns=s("p",{class:"fw-bold m-0"},"Penempatan",-1),Is={class:"col-md-8"},Rs={class:"card"},Us={class:"card-body"},zs={class:"mb-3"},Ts={class:"text-lowercase"},As=["disabled"],Es=s("option",{disabled:"",selected:""},null,-1),Ks=["value"],Ms={class:"mb-3"},Os=s("label",null,"Promosikan diri Anda! ",-1),Js=["disabled"],Fs={class:"card-footer text-center"},Ws={key:0,class:"btn btn-sm btn-primary"},Gs={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},Hs=s("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function Ys(o,i,V,U,e,m){var t,l,D,L,j;const y=g("PageTitle"),P=g("DataPersonal"),S=g("Success");return r(),n(c,null,[e.isNullPersonalData?d("",!0):(r(),w(y,{key:0,title:"Lamar Pekerjaan",isBack:!0,onOnBack:i[0]||(i[0]=p=>o.onBack())})),e.isNullPersonalData?d("",!0):(r(),n("div",ks,[s("form",{onSubmit:i[3]||(i[3]=R((...p)=>m.handleSubmit&&m.handleSubmit(...p),["prevent"])),method:"post"},[s("div",ys,[s("div",Ps,[s("div",Ss,[s("div",Cs,[s("div",ws,[s("div",Vs,[s("img",{src:(t=e.jobVacancy.companyMember)==null?void 0:t.companyLogo,alt:(l=e.jobVacancy.companyMember)==null?void 0:l.companyName,height:"50"},null,8,Ds)]),s("div",Ls,[s("h5",js,a((D=e.jobVacancy.welderSkill)==null?void 0:D.skillName),1),s("p",null,a((L=e.jobVacancy.companyMember)==null?void 0:L.companyName),1)])]),s("div",null,[Bs,s("p",null,a(m.getRupiah(e.jobVacancy.salary)),1)]),s("div",null,[xs,s("p",null,a(e.jobVacancy.workType),1)]),s("div",null,[Ns,s("p",null,a(e.jobVacancy.placement),1)])])])]),s("div",Is,[s("div",Rs,[s("div",Us,[s("div",zs,[s("label",null,[k("Berapa tahun pengalaman kerjamu sebagai "),s("span",Ts,a((j=e.jobVacancy.welderSkill)==null?void 0:j.skillName),1),k("?")]),_(s("select",{class:h(["form-select",{"is-invalid":e.errors.experience}]),"onUpdate:modelValue":i[1]||(i[1]=p=>e.form.experience=p),disabled:e.isLoading},[Es,(r(!0),n(c,null,u(e.experiences,(p,f)=>(r(),n("option",{key:f,value:p.value},a(p.value),9,Ks))),128))],10,As),[[b,e.form.experience]]),e.errors.experience?(r(!0),n(c,{key:0},u(e.errors.experience,(p,f)=>(r(),n("div",{class:"invalid-feedback",key:f},a(p),1))),128)):d("",!0)]),s("div",Ms,[Os,_(s("textarea",{class:h(["form-control",{"is-invalid":e.errors.promote}]),rows:"8","onUpdate:modelValue":i[2]||(i[2]=p=>e.form.promote=p),disabled:e.isLoading,placeholder:"Beritahu perusahaan mengapa Anda paling cocok untuk posisi ini. Sebutkan keterampilan khusus dan bagaimana Anda berkontribusi. Hindari hal generik seperti Saya bertanggung jawab."},null,10,Js),[[v,e.form.promote]]),e.errors.promote?(r(!0),n(c,{key:0},u(e.errors.promote,(p,f)=>(r(),n("div",{class:"invalid-feedback",key:f},a(p),1))),128)):d("",!0)])]),s("div",Fs,[e.isLoading?d("",!0):(r(),n("button",Ws," Kirim Lamaran ")),e.isLoading?(r(),n("button",Gs,[Hs,k(" Harap Tunggu... ")])):d("",!0)])])])])],32)])),e.isNullPersonalData?(r(),w(P,{key:2,onOnSuccess:i[4]||(i[4]=p=>m.onSuccess())})):d("",!0),e.isNullPersonalData?d("",!0):(r(),w(S,{key:3,url:{name:"Dashboard"},msg:"lamaran berhasil dikirim."},null,8,["msg"]))],64)}const et=I(fs,[["render",Ys]]);export{et as default};
