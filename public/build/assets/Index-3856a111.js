import{S as H}from"./Success-7008e664.js";import{C as M}from"./Confirm-300685bb.js";import{P as U}from"./PageTitle-d62c03d9.js";import{P as C}from"./Pagination-f12724ac.js";import{P as D}from"./pagination-8c4016f1.js";import{U as w}from"./util-54581a61.js";import{L as S}from"./Loader-587f361e.js";import{_ as A,r as l,o as a,c as r,b as c,w as u,a as e,g as m,f as d,k as x,v as N,F as L,l as E,d as g}from"./app-913bfa44.js";const V={data(){return{uuid:null,users:[],pagination:{perPage:10,page:1},filters:{search:""},metaPagination:{},msg:"",isLoading:!1}},mounted(){this.getUsers()},methods:{iteration(t){return D.iteration(t,this.metaPagination)},getGender(t){return w.getGender(t)},getUsers(){this.isLoading=!0;let t=[`per_page=${this.pagination.perPage}`,`page=${this.pagination.page}`,`search=${this.filters.search}`].join("&");this.$store.dispatch("getData",["user/hub",t]).then(n=>{this.isLoading=!1,this.users=n.data,this.metaPagination=n.meta}).catch(n=>{this.isLoading=!1,console.log(n)})},onUpdateStatus(t,n){this.isLoading=!0,this.errors={},this.$store.dispatch("updateData",["user/hub/update-status",t,{}]).then(p=>{this.isLoading=!1,this.msg="data berhasil diperbaharui.",this.getUsers(),$("#successModal").modal("show"),this.$emit("onCancel",!0)}).catch(p=>{this.isLoading=!1})},onSearch(){setTimeout(()=>{this.getUsers()},1e3)},onPageChange(t){this.pagination.page=t,this.getUsers()},onDelete(){this.isLoading=!0,$("#confirmModal").modal("hide"),this.$store.dispatch("deleteData",["user/hub",this.uuid]).then(t=>{this.getUsers(),this.isLoading=!1,this.msg="data berhasil dihapus.",$("#successModal").modal("show")}).catch(t=>{this.isLoading=!1})},handleDelete(t){this.uuid=t,this.msg="apakah anda yakin data ini akan dihapus?",$("#confirmModal").modal("show")}},components:{Pagination:C,PageTitle:U,Success:H,Confirm:M,Loader:S}},B={class:"breadcrumb m-0"},j={class:"breadcrumb-item"},G=e("li",{class:"breadcrumb-item active"},"Daftar Pengguna Admin Pusat",-1),O={class:"card position-relative"},F={class:"card-body"},J={class:"table-responsive"},K={class:"d-md-flex d-block justify-content-between align-items-center mb-2"},I={key:0,class:"text-center"},R={class:"d-md-flex justify-content-between align-items-center"},q={class:"me-md-2 me-0"},z={class:"table-responsive"},Q={class:"table table-hover table-bordered"},W=e("thead",null,[e("tr",null,[e("th",null,"No."),e("th",null,"Nama Pengguna"),e("th",null,"Email Pengguna"),e("th",null,"Jabatan"),e("th",null,"Jenis Kelamin"),e("th",null,"Aksi")])],-1),X={key:0},Y=e("td",{colspan:"6",class:"text-center"}," data pengguna admin pusat tidak ada ",-1),Z=[Y],ee=["innerHTML"],te=["innerHTML"],se=["innerHTML"],ne=["innerHTML"],ae=["innerHTML"],ie=["onClick"];function oe(t,n,p,re,i,o){const h=l("router-link"),P=l("PageTitle"),k=l("Loader"),v=l("Pagination"),y=l("Success"),T=l("Confirm");return a(),r(L,null,[c(P,{title:"Daftar Pengguna Admin Pusat"},{default:u(()=>[e("ol",B,[e("li",j,[c(h,{to:{name:"Dashboard"}},{default:u(()=>[g("Dashboard")]),_:1})]),G])]),_:1}),e("div",O,[i.isLoading?(a(),m(k,{key:0})):d("",!0),e("div",F,[e("div",J,[e("div",K,[t.$can("create","Adminhub")?(a(),r("div",I,[c(h,{to:{name:"User Hub Create"},class:"btn btn-primary mb-2 btn-sm"},{default:u(()=>[g("Tambah Pengguna")]),_:1})])):d("",!0),e("div",R,[e("div",q,[t.$can("search","Adminhub")?x((a(),r("input",{key:0,type:"search",class:"form-control",placeholder:"pencarian",onKeyup:n[0]||(n[0]=(...s)=>o.onSearch&&o.onSearch(...s)),"onUpdate:modelValue":n[1]||(n[1]=s=>i.filters.search=s)},null,544)),[[N,i.filters.search]]):d("",!0)]),t.$can("pagination","Adminhub")?(a(),m(v,{key:0,pagination:i.metaPagination,onOnPageChange:n[2]||(n[2]=s=>o.onPageChange(s))},null,8,["pagination"])):d("",!0)])])]),e("div",z,[e("table",Q,[W,e("tbody",null,[i.users.length<1?(a(),r("tr",X,Z)):(a(!0),r(L,{key:1},E(i.users,(s,_)=>{var b,f;return a(),r("tr",{key:_},[e("th",{innerHTML:o.iteration(_)},null,8,ee),e("td",{innerHTML:s.name},null,8,te),e("td",{innerHTML:s.email},null,8,se),e("td",{innerHTML:(b=s.adminHub)==null?void 0:b.position},null,8,ne),e("td",{innerHTML:o.getGender((f=s.adminHub)==null?void 0:f.gender)},null,8,ae),e("td",null,[t.$can("update","Adminhub")?(a(),m(h,{key:0,to:{name:"User Hub Edit",params:{id:s.uuid}},class:"btn btn-sm btn-warning me-2 text-white"},{default:u(()=>[g("Edit")]),_:2},1032,["to"])):d("",!0),t.$store.state.USER.uuid!=s.uuid?(a(),r("button",{key:1,class:"btn btn-sm btn-danger",onClick:le=>o.handleDelete(s.uuid)}," Hapus ",8,ie)):d("",!0)])])}),128))])])])])]),c(y,{url:{name:"User Hub"},msg:i.msg},null,8,["msg"]),c(T,{onOnDelete:o.onDelete,msg:i.msg},null,8,["onOnDelete","msg"])],64)}const be=A(V,[["render",oe]]);export{be as default};
