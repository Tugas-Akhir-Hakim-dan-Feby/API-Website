import{P as T}from"./PageTitle-58c23235.js";import{S as V}from"./Success-8d26ff00.js";import{_ as D,e as I,r as k,o as r,c as n,b,w as y,a as o,d as f,n as u,F as c,l as d,t as m,f as a,k as p,m as M,v,u as B,j as C,B as j}from"./app-dd65cc79.js";const x={data(){return{isLoading:!1,welderSkills:[],companyMembers:[],form:{welderSkillId:"",workType:"",placement:"",salary:"",contact:"",deadline:"",description:"",companyMemberId:""},user:{},roles:[],errors:{},minDate:new Date().toISOString().split("T")[0]}},mounted(){this.getUser(),this.getWelderSkills(),this.getCompanyMembers()},methods:{getUser(){this.$store.dispatch("showData",["user","me"]).then(i=>{this.user=i.user,this.roles=i.roles}).catch(i=>{})},getCompanyMembers(){$(this.$refs.companyMember).select2({ajax:{url:`${this.$store.state.BASE_URL}/api/v1/user/company-member`,dataType:"json",headers:{Authorization:"Bearer "+I.get("token")},delay:250,data:function(i){return{search:i.term,per_page:20}},processResults:function(i){return{results:i.data.map(t=>{var h,g;return{id:(h=t.company_member)==null?void 0:h.uuid,text:(g=t.company_member)==null?void 0:g.company_name}})}},cache:!0}}),$(this.$refs.companyMember).on("change",()=>{this.form.companyMemberId=$(this.$refs.companyMember).val(),$(".select2-hidden-accessible").removeClass("is-invalid")})},getWelderSkills(){this.$store.dispatch("getData",["skill/welder",""]).then(i=>{this.welderSkills=i.data}).catch(i=>{})},handleSubmit(){this.errors={},this.isLoading=!0,this.checkRoleAccess([this.$store.state.MEMBER_COMPANY])&&(this.form.companyMemberId=this.user.companyMember.uuid),this.$store.dispatch("postData",["job-vacancy",this.form]).then(i=>{this.isLoading=!1,$("#successModal").modal("show")}).catch(i=>{this.isLoading=!1,this.errors=i.response.data.messages})},onBack(){this.$router.push({name:"Job Vacancy"})},uploadDocumentPamphlet(i){this.form.documentPamphlet=i.target.files[0]},checkRoleAccess(i){let t=!1;return i&&i.forEach(h=>{this.roles.includes(h)&&(t=!0,this.getCompanyMembers())}),t}},components:{PageTitle:T,Success:V}},U={class:"breadcrumb m-0"},A={class:"breadcrumb-item"},N={class:"breadcrumb-item"},E=o("li",{class:"breadcrumb-item active"},"Tambah Lowongan",-1),W={class:"card"},J={class:"card-body"},R={key:0,class:"mb-2"},z=o("label",null,"Pilih Perusahaan",-1),K=["disabled"],O={class:"mb-2"},H=o("label",null,"Jenis Lowongan",-1),F=["disabled"],Q=o("option",{disabled:"",selected:""},null,-1),Y=["value","innerHTML"],G={class:"mb-2"},q=o("label",null,"Jenis Pekerjaan",-1),X=["disabled"],Z=j('<option disabled selected></option><option value="Penuh Waktu">Penuh Waktu</option><option value="Paruh Waktu">Paruh Waktu</option><option value="Kontrak">Kontrak</option><option value="Magang">Magang</option>',5),ee=[Z],se={class:"mb-2"},oe=o("label",null,"Kontak Yang Dihubungi",-1),te=["disabled"],re={class:"mb-2"},ne=o("label",null,"Penempatan Kerja",-1),ie=["disabled"],le={class:"mb-2"},ae=o("label",null,"Perkiraan Gaji",-1),ce=["disabled"],de={class:"mb-2"},me=o("label",null,"Waktu Penutupan",-1),ue=["disabled","min"],be={class:"mb-2"},pe=o("label",null,"Deskripsi Pekerjaan",-1),he={class:"card-footer d-flex justify-content-between"},_e={key:0,class:"btn btn-sm btn-success"},ke={key:1,class:"btn btn-sm btn-success",type:"button",disabled:""},ye=o("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function fe(i,t,h,g,e,_){const w=k("router-link"),S=k("PageTitle"),L=k("QuillEditor"),P=k("Success");return r(),n(c,null,[b(S,{title:"Tambah Lowongan",isBack:!0,onOnBack:_.onBack},{default:y(()=>[o("ol",U,[o("li",A,[b(w,{to:{name:"Dashboard"}},{default:y(()=>[f("Dashboard")]),_:1})]),o("li",N,[b(w,{to:{name:"Job Vacancy"}},{default:y(()=>[f("Lowongan Pekerjaan")]),_:1})]),E])]),_:1},8,["onOnBack"]),o("form",{onSubmit:t[7]||(t[7]=C((...s)=>_.handleSubmit&&_.handleSubmit(...s),["prevent"])),method:"post"},[o("div",W,[o("div",J,[_.checkRoleAccess([i.$store.state.ADMIN_APP])?(r(),n("div",R,[z,o("select",{class:u(["form-select select2-hidden-accessible",{"is-invalid":e.errors.companyMemberId}]),ref:"companyMember",disabled:e.isLoading},null,10,K),e.errors.companyMemberId?(r(!0),n(c,{key:0},d(e.errors.companyMemberId,(s,l)=>(r(),n("div",{class:"invalid-feedback",key:l},m(s),1))),128)):a("",!0)])):a("",!0),o("div",O,[H,p(o("select",{class:u(["form-select",{"is-invalid":e.errors.welderSkillId}]),"onUpdate:modelValue":t[0]||(t[0]=s=>e.form.welderSkillId=s),disabled:e.isLoading},[Q,(r(!0),n(c,null,d(e.welderSkills,(s,l)=>(r(),n("option",{value:s.uuid,key:l,innerHTML:s.skillName},null,8,Y))),128))],10,F),[[M,e.form.welderSkillId]]),e.errors.welderSkillId?(r(!0),n(c,{key:0},d(e.errors.welderSkillId,(s,l)=>(r(),n("div",{class:"invalid-feedback",key:l},m(s),1))),128)):a("",!0)]),o("div",G,[q,p(o("select",{class:u(["form-select",{"is-invalid":e.errors.workType}]),"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.workType=s),disabled:e.isLoading},ee,10,X),[[M,e.form.workType]]),e.errors.workType?(r(!0),n(c,{key:0},d(e.errors.workType,(s,l)=>(r(),n("div",{class:"invalid-feedback",key:l},m(s),1))),128)):a("",!0)]),o("div",se,[oe,p(o("input",{type:"number",class:u(["form-control",{"is-invalid":e.errors.contact}]),"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.contact=s),disabled:e.isLoading},null,10,te),[[v,e.form.contact]]),e.errors.contact?(r(!0),n(c,{key:0},d(e.errors.contact,(s,l)=>(r(),n("div",{class:"invalid-feedback",key:l},m(s),1))),128)):a("",!0)]),o("div",re,[ne,p(o("input",{type:"text",class:u(["form-control",{"is-invalid":e.errors.placement}]),"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.placement=s),disabled:e.isLoading},null,10,ie),[[v,e.form.placement]]),e.errors.placement?(r(!0),n(c,{key:0},d(e.errors.placement,(s,l)=>(r(),n("div",{class:"invalid-feedback",key:l},m(s),1))),128)):a("",!0)]),o("div",le,[ae,p(o("input",{type:"number",class:u(["form-control",{"is-invalid":e.errors.salary}]),"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.salary=s),disabled:e.isLoading},null,10,ce),[[v,e.form.salary]]),e.errors.salary?(r(!0),n(c,{key:0},d(e.errors.salary,(s,l)=>(r(),n("div",{class:"invalid-feedback",key:l},m(s),1))),128)):a("",!0)]),o("div",de,[me,p(o("input",{type:"date",class:u(["form-control",{"is-invalid":e.errors.deadline}]),"onUpdate:modelValue":t[5]||(t[5]=s=>e.form.deadline=s),disabled:e.isLoading,min:e.minDate},null,10,ue),[[v,e.form.deadline]]),e.errors.deadline?(r(!0),n(c,{key:0},d(e.errors.deadline,(s,l)=>(r(),n("div",{class:"invalid-feedback",key:l},m(s),1))),128)):a("",!0)]),o("div",be,[pe,b(L,{theme:"snow",toolbar:"essential",style:B([{height:"300px"},{borderColor:e.errors.articleContent?"#fa5c7c":""}]),contentType:"html",content:e.form.description,"onUpdate:content":t[6]||(t[6]=s=>e.form.description=s)},null,8,["content","style"]),e.errors.description?(r(!0),n(c,{key:0},d(e.errors.description,(s,l)=>(r(),n("div",{style:{width:"100%","margin-top":"0.25rem","font-size":"0.75rem",color:"#fa5c7c"},key:l},m(s),1))),128)):a("",!0)])]),o("div",he,[b(w,{to:{name:"Job Vacancy"},class:"btn btn-sm btn-secondary",disabled:e.isLoading},{default:y(()=>[f("Batal")]),_:1},8,["disabled"]),e.isLoading?a("",!0):(r(),n("button",_e," Simpan ")),e.isLoading?(r(),n("button",ke,[ye,f(" Harap Tunggu... ")])):a("",!0)])])],32),b(P,{url:{name:"Job Vacancy"},msg:"data berhasil ditambahkan."},null,8,["msg"])],64)}const Me=D(x,[["render",fe]]);export{Me as default};
