import{d as v}from"./id-e70b0f48.js";import{_ as E,r as T,o as i,c as a,a as t,t as m,k as _,v as b,n as f,F as x,l as P,f as d,d as y,g as w,w as M}from"./app-b13587b6.js";const D={props:{examPacket:{default:{},type:Object},edit:{default:!1,type:Boolean},isShowParticipant:{default:!1,type:Boolean}},data(){return{roles:[],errors:{},isLoading:!1,isEdit:!1,schedule:null}},mounted(){this.schedule=this.date,this.getUser()},methods:{getUser(){this.$store.dispatch("showData",["user","me"]).then(o=>{this.roles=o.roles}).catch(o=>{})},getSchedule(o){return v(o).locale("id").format("DD MMMM YYYY")},getMinute(o,l){if(o){const[s,g]=o.split(":"),[e,r]=l.split(":"),k=new Date;k.setHours(s),k.setMinutes(g);const u=new Date;u.setHours(e),u.setMinutes(r);let h=(u.getTime()-k.getTime())/1e3/60;return h<0&&(h+=1440),h}},handleEdit(){this.isLoading=!0;let o={name:this.examPacket.name,schedule:this.examPacket.date,startTime:this.examPacket.startTime,endTime:this.examPacket.endTime,_method:"put"};this.$store.dispatch("updateData",["exam-packet",this.examPacket.uuid,o]).then(l=>{this.isLoading=!1,this.isEdit=!1,this.$emit("onSuccessEdit",!0)}).catch(l=>{this.isLoading=!1})},checkRole(o){return!!this.roles.includes(o)}}},L={class:"row"},p={class:"col-sm-12"},U={class:"card bg-primary"},B={class:"card-body profile-user-box"},S={class:"row"},N={class:"col-sm-8"},C={class:"row align-items-center"},H={class:"col"},R={key:0,class:"mt-1 mb-1 text-white"},V=["disabled"],A=t("p",{class:"font-13 text-white-50"}," Nama Paket ",-1),I={class:"mb-0 list-inline text-light"},j={class:"list-inline-item me-3"},Y={key:0,class:"mb-1 text-white"},J=["disabled"],F=t("p",{class:"mb-0 font-13 text-white-50"}," Jadwal Ujian ",-1),z={class:"list-inline-item"},O={key:0,class:"mb-1 text-white"},W={key:1,class:"row"},q={class:"col-lg-6 mt-2"},G=t("p",{class:"mb-0 font-13 text-white-50"}," Jam Mulai ",-1),K=["disabled"],Q={class:"col-lg-6 mt-2"},X=t("p",{class:"mb-0 font-13 text-white-50"}," Jam Selesai ",-1),Z=["disabled"],$=t("p",{class:"mb-0 font-13 text-white-50"}," Tenggat Pengerjaan ",-1),ee={class:"col-sm-4"},te={class:"text-center mt-sm-0 mt-3 text-sm-end"},se={key:1,class:"btn btn-sm btn-success me-2",type:"button",disabled:""},ie=t("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function ne(o,l,s,g,e,r){var u,h;const k=T("router-link");return i(),a("div",L,[t("div",p,[t("div",U,[t("div",B,[t("div",S,[t("div",N,[t("div",C,[t("div",H,[t("div",null,[e.isEdit?_((i(),a("input",{key:1,type:"text",class:f(["form-control mt-2",{"is-invalid":e.errors.name}]),"onUpdate:modelValue":l[0]||(l[0]=n=>s.examPacket.name=n),disabled:e.isLoading},null,10,V)),[[b,s.examPacket.name]]):(i(),a("h4",R,m(s.examPacket.name),1)),e.errors.name?(i(!0),a(x,{key:2},P(e.errors.name,(n,c)=>(i(),a("div",{class:"invalid-feedback",key:c},m(n)+". ",1))),128)):d("",!0),A,t("ul",I,[t("li",j,[e.isEdit?_((i(),a("input",{key:1,type:"date",class:f(["form-control mt-2",{"is-invalid":e.errors.schedule}]),"onUpdate:modelValue":l[1]||(l[1]=n=>s.examPacket.date=n),disabled:e.isLoading},null,10,J)),[[b,s.examPacket.date]]):(i(),a("h5",Y,m(r.getSchedule(s.examPacket.schedule)),1)),e.errors.schedule?(i(!0),a(x,{key:2},P(e.errors.schedule,(n,c)=>(i(),a("div",{class:"invalid-feedback",key:c},m(n)+". ",1))),128)):d("",!0),F]),t("li",z,[e.isEdit?(i(),a("div",W,[t("div",q,[G,_(t("input",{type:"time",class:f(["form-control",{"is-invalid":e.errors.startTime}]),"onUpdate:modelValue":l[2]||(l[2]=n=>s.examPacket.startTime=n),disabled:e.isLoading},null,10,K),[[b,s.examPacket.startTime]]),e.errors.startTime?(i(!0),a(x,{key:0},P(e.errors.startTime,(n,c)=>(i(),a("div",{class:"invalid-feedback",key:c},m(n)+". ",1))),128)):d("",!0)]),t("div",Q,[X,_(t("input",{type:"time",class:f(["form-control",{"is-invalid":e.errors.endTime}]),"onUpdate:modelValue":l[3]||(l[3]=n=>s.examPacket.endTime=n),disabled:e.isLoading},null,10,Z),[[b,s.examPacket.endTime]]),e.errors.endTime?(i(!0),a(x,{key:0},P(e.errors.endTime,(n,c)=>(i(),a("div",{class:"invalid-feedback",key:c},m(n)+". ",1))),128)):d("",!0)])])):(i(),a("h5",O,m(`${s.examPacket.startTime} - ${s.examPacket.endTime} WIB (${r.getMinute(s.examPacket.startTime,s.examPacket.endTime)} Menit)`),1)),$])])])])])]),t("div",ee,[t("div",te,[e.isEdit&&!e.isLoading?(i(),a("button",{key:0,type:"button",class:"btn btn-sm btn-success me-2",onClick:l[4]||(l[4]=(...n)=>r.handleEdit&&r.handleEdit(...n))}," Simpan ")):d("",!0),e.isEdit&&e.isLoading?(i(),a("button",se,[ie,y(" Harap Tunggu... ")])):d("",!0),!e.isEdit&&(((u=s.examPacket.user)==null?void 0:u.name)==o.$store.state.USER.uuid||r.checkRole(o.$store.state.ADMIN_APP)||r.checkRole(o.$store.state.ADMIN_HUB))&&s.isShowParticipant?(i(),w(k,{key:2,class:"btn btn-sm btn-light me-2",to:{name:"Exam Packet Participant",params:{id:s.examPacket.uuid}}},{default:M(()=>[y(" Lihat Peserta ")]),_:1},8,["to"])):d("",!0),!e.isEdit&&(((h=s.examPacket.user)==null?void 0:h.name)==o.$store.state.USER.uuid||r.checkRole(o.$store.state.ADMIN_APP)||r.checkRole(o.$store.state.ADMIN_HUB))&&s.edit?(i(),a("button",{key:3,type:"button",class:"btn btn-sm btn-light",onClick:l[5]||(l[5]=n=>e.isEdit=!0)}," Edit Paket ")):d("",!0),e.isEdit?(i(),a("button",{key:4,type:"button",class:"btn btn-sm btn-light",onClick:l[6]||(l[6]=n=>e.isEdit=!1)}," Batal ")):d("",!0)])])])])])])])}const le=E(D,[["render",ne]]);export{le as E};
