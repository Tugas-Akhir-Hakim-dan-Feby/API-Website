import{L as D}from"./Loader-d224f607.js";import{C as B}from"./Confirm-8431c8a7.js";import{S as E}from"./Success-4d6c84cb.js";import{P as w}from"./PageTitle-7562df40.js";import{P as x}from"./Pagination-9fc7bd0d.js";import{P as N}from"./pagination-8c4016f1.js";import{_ as A,r as c,o as a,c as l,b as m,w as p,a as t,d as f,g as h,f as d,k as M,v as S,F as L,l as H,t as C}from"./app-b56b39b4.js";import{d as j}from"./id-31fcb1a5.js";import{N as O}from"./no-images-b2b3f728.js";const R={data(){return{msg:"",uuid:"",isLoading:!1,articles:[],pagination:{perPage:10,page:1},filters:{search:""},metaPagination:{}}},mounted(){this.getArticles()},methods:{iteration(e){return N.iteration(e,this.metaPagination)},getArticles(){this.isLoading=!0;let e=[`per_page=${this.pagination.perPage}`,`page=${this.pagination.page}`,`search=${this.filters.search}`].join("&");this.$store.dispatch("getData",["article",e]).then(s=>{this.isLoading=!1,this.articles=s.data,this.metaPagination=s.meta}).catch(s=>{this.isLoading=!1})},handleDelete(e){this.uuid=e,$("#confirmModal").modal("show")},onDelete(){this.isLoading=!0,this.$store.dispatch("deleteData",["article",this.uuid]).then(e=>{this.isLoading=!1,this.msg="data berhasil dihapus.",this.getArticles(),$("#confirmModal").modal("hide"),$("#successModal").modal("show")}).catch(e=>{this.isLoading=!1,e.response.data.status=="ERROR"&&e.response.data.statusCode==500&&(this.isError=!0,this.msg=e.response.data.message)})},onUpdateStatus(e,s){this.isLoading=!0,this.errors={},this.$store.dispatch("updateData",["article/update-status",e,{}]).then(u=>{this.isLoading=!1,this.msg="data berhasil diperbaharui.",this.getArticles(),$("#successModal").modal("show"),this.$emit("onCancel",!0)}).catch(u=>{this.isLoading=!1,u.response.data.status=="ERROR"&&u.response.data.statusCode==500&&(this.isError=!0,this.msg=u.response.data.message)})},onSearch(){setTimeout(()=>{this.getArticles()},1e3)},onPageChange(e){this.pagination.page=e,this.getArticles()}},components:{PageTitle:w,Pagination:x,Success:E,Confirm:B,Loader:D}},I={class:"breadcrumb m-0"},V={class:"breadcrumb-item"},K=t("li",{class:"breadcrumb-item active"},"Kumpulan Berita",-1),U={class:"card"},Y={class:"card-body position-relative"},G={class:"d-md-flex d-block justify-content-between align-items-center mb-2"},F={key:0,class:"text-center"},J={class:"d-md-flex justify-content-between align-items-center"},q={class:"me-md-2 me-0"},z={class:"table-responsive"},Q={class:"table table-hover table-bordered"},W=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"Judul"),t("th",null,"Pembuat"),t("th",null,"Aksi")])],-1),X={key:0},Z=t("td",{colspan:"5",class:"text-center"}," data berita tidak ada ",-1),ee=[Z],te=["innerHTML"],se=["innerHTML"],ae=["innerHTML"],ne=["onClick"];function ie(e,s,u,v,i,o){const g=c("router-link"),_=c("PageTitle"),b=c("Loader"),y=c("Pagination"),n=c("Success"),k=c("Confirm");return a(),l(L,null,[m(_,{title:"Kumpulan Berita"},{default:p(()=>[t("ol",I,[t("li",V,[m(g,{to:{name:"Dashboard"}},{default:p(()=>[f("Dashboard")]),_:1})]),K])]),_:1}),t("div",U,[t("div",Y,[i.isLoading?(a(),h(b,{key:0})):d("",!0),t("div",G,[e.$can("create","Article")?(a(),l("div",F,[m(g,{to:{name:"Article Create"},class:"btn btn-primary btn-sm mb-2 me-3"},{default:p(()=>[f(" Tambah Berita ")]),_:1})])):d("",!0),t("div",J,[t("div",q,[e.$can("search","Article")?M((a(),l("input",{key:0,type:"search",class:"form-control",placeholder:"pencarian",onKeyup:s[0]||(s[0]=(...r)=>o.onSearch&&o.onSearch(...r)),"onUpdate:modelValue":s[1]||(s[1]=r=>i.filters.search=r)},null,544)),[[S,i.filters.search]]):d("",!0)]),e.$can("pagination","Article")?(a(),h(y,{key:0,pagination:i.metaPagination,onOnPageChange:s[2]||(s[2]=r=>o.onPageChange(r))},null,8,["pagination"])):d("",!0)])]),t("div",z,[t("table",Q,[W,t("tbody",null,[i.articles.length<1?(a(),l("tr",X,ee)):(a(!0),l(L,{key:1},H(i.articles,(r,P)=>{var T;return a(),l("tr",{key:P},[t("td",{innerHTML:o.iteration(P)},null,8,te),t("td",{innerHTML:r.articleTitle},null,8,se),t("td",{innerHTML:(T=r.user)==null?void 0:T.name},null,8,ae),t("td",null,[e.$can("update","Article")?(a(),h(g,{key:0,to:{name:"Article Edit",params:{id:r.uuid}},class:"btn btn-sm btn-warning text-white me-2"},{default:p(()=>[f(" Edit ")]),_:2},1032,["to"])):d("",!0),e.$can("delete","Article")?(a(),l("button",{key:1,class:"btn btn-sm btn-danger",onClick:He=>o.handleDelete(r.uuid)}," Hapus ",8,ne)):d("",!0)])])}),128))])])])])]),m(n,{url:{name:"Article"},msg:i.msg},null,8,["msg"]),m(k,{onOnDelete:o.onDelete},null,8,["onOnDelete"])],64)}const oe=A(R,[["render",ie]]),re={data(){return{isLoading:!1,articles:[],pagination:{perPage:10,page:1},filters:{search:""},metaPagination:{}}},mounted(){this.getArticles()},methods:{getArticles(){this.isLoading=!0;let e=[`per_page=${this.pagination.perPage}`,`page=${this.pagination.page}`,`search=${this.filters.search}`].join("&");this.$store.dispatch("getData",["article",e]).then(s=>{this.isLoading=!1,this.articles=s.data,this.metaPagination=s.meta}).catch(s=>{this.isLoading=!1})},getDateTime(e){return j(e).locale("id").format("dddd, DD MMMM YYYY")},defaultImage(e){e.target.src=O},onSearch(){setTimeout(()=>{this.getArticles()},1e3)},onPageChange(e){this.pagination.page=e,this.getArticles()}},components:{PageTitle:w,Pagination:x,Loader:D}},le={class:"position-relative"},ce={class:"d-flex justify-content-between flex-md-row flex-column"},de={class:"d-md-flex justify-content-between align-items-center"},me={class:"me-md-2 me-0"},he={class:"row",id:"article"},ue={class:"card"},ge={class:"card-body"},pe=["src"],_e={class:"d-flex mt-1 align-items-center align-items-md-start flex-lg-row flex-column",style:{"list-style-type":"none",padding:"0"}},fe={class:"me-3 d-flex align-items-center"},be=t("i",{class:"mdi mdi-account me-1"},null,-1),ye=["innerHTML"],$e={class:"me-3 d-flex align-items-center"},Pe=t("i",{class:"mdi mdi-calendar-clock me-1"},null,-1),ke=["innerHTML"],Le={class:"mt-2 my-1"},Ae={class:"mb-0 text-muted"},ve=t("hr",{class:"bg-dark-lighten my-3"},null,-1),Te={class:"mt-3 fw-semibold text-muted"};function Ce(e,s,u,v,i,o){const g=c("Loader"),_=c("PageTitle"),b=c("Pagination"),y=c("router-link");return a(),l("div",le,[i.isLoading?(a(),h(g,{key:0})):d("",!0),t("div",ce,[m(_,{title:"Kumpulan Berita"}),t("div",de,[t("div",me,[e.$can("search","Article")?M((a(),l("input",{key:0,type:"search",class:"form-control",placeholder:"pencarian",onKeyup:s[0]||(s[0]=(...n)=>o.onSearch&&o.onSearch(...n)),"onUpdate:modelValue":s[1]||(s[1]=n=>i.filters.search=n)},null,544)),[[S,i.filters.search]]):d("",!0)]),e.$can("pagination","Article")?(a(),h(b,{key:0,pagination:i.metaPagination,onOnPageChange:s[2]||(s[2]=n=>o.onPageChange(n))},null,8,["pagination"])):d("",!0)])]),t("div",he,[(a(!0),l(L,null,H(i.articles,(n,k)=>{var r;return a(),l("div",{class:"col-md-6 col-xxl-3",key:k},[t("div",ue,[t("div",ge,[t("img",{src:n.document?n.document.documentPath:"NoImages.png",style:{width:"100%",height:"250px"},onError:s[3]||(s[3]=(...P)=>o.defaultImage&&o.defaultImage(...P))},null,40,pe),t("ul",_e,[t("li",fe,[be,t("p",{class:"mb-0",innerHTML:(r=n.user)==null?void 0:r.name},null,8,ye)]),t("li",$e,[Pe,t("p",{class:"mb-0",innerHTML:o.getDateTime(n.createdAt)},null,8,ke)])]),t("h4",Le,[e.$can("show","Article")?(a(),h(y,{key:0,to:{name:"Article Detail",params:{slug:n.articleSlug}},class:"text-reset"},{default:p(()=>[f(C(n.articleTitle),1)]),_:2},1032,["to"])):d("",!0)]),t("p",Ae,C(n.articleExcerpt),1),ve,t("h5",Te,[e.$can("show","Article")?(a(),h(y,{key:0,to:{name:"Article Detail",params:{slug:n.articleSlug}}},{default:p(()=>[f("Baca Selengkapnya")]),_:2},1032,["to"])):d("",!0)])])])])}),128))]),e.$can("pagination","Article")?(a(),h(b,{key:1,pagination:i.metaPagination,onOnPageChange:s[4]||(s[4]=n=>o.onPageChange(n))},null,8,["pagination"])):d("",!0)])}const De=A(re,[["render",Ce]]),we={data(){return{roles:[]}},mounted(){this.getProfile()},methods:{getProfile(){this.$store.dispatch("showData",["user","me"]).then(e=>{this.roles=e.roles}).catch(e=>{})},checkRoles(e){if(e==this.roles)return!0}},components:{Admin:oe,Guest:De}},xe={key:0},Me={key:1};function Se(e,s,u,v,i,o){const g=c("Guest"),_=c("Admin");return e.$can("index-guest","Article")?(a(),l("div",xe,[m(g)])):(a(),l("div",Me,[m(_)]))}const Ue=A(we,[["render",Se]]);export{Ue as default};
