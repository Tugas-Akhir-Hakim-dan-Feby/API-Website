import{P as V}from"./PageTitle-7945d5aa.js";import{E as x}from"./Error-ff866501.js";import{S as C}from"./Success-04ed925e.js";import{U as D}from"./util-54581a61.js";import{d as S}from"./id-fde3f372.js";import{_ as I,r as y,o as t,c as n,b as f,w as B,g as R,f as l,a as i,j as T,k as h,m as U,n as u,F as d,l as m,v as b,d as L,t as c}from"./app-5009bbee.js";const w={props:["id"],data(){return{msg:"",branches:[],isError:!1,isLoading:!1,errors:{},form:{nip:"",name:"",email:"",phone:"",birthPlace:"",dateBirth:"",gender:"",position:"",address:"",branchId:""}}},mounted(){this.getUser(),this.getBranches(),D.removeInvalidClass()},methods:{setForm(o){var r,P,E,e,_,p,g,v,k;this.form={nip:(r=o.adminBranch)==null?void 0:r.nip,name:o.name,email:o.email,phone:(P=o.adminBranch)==null?void 0:P.phone,birthPlace:(E=o.adminBranch)==null?void 0:E.birthPlace,dateBirth:this.getDateBirth((e=o.adminBranch)==null?void 0:e.dateBirth),gender:(_=o.adminBranch)==null?void 0:_.gender,position:(p=o.adminBranch)==null?void 0:p.position,address:(g=o.adminBranch)==null?void 0:g.address,branchId:(k=(v=o.adminBranch)==null?void 0:v.branch)==null?void 0:k.uuid}},getUser(){this.isLoading=!0,this.$store.dispatch("showData",["user/branch",this.id]).then(o=>{this.isLoading=!1,this.setForm(o.data)}).catch(o=>{this.isLoading=!1,this.errors=o.response.data.messages,o.response.data.status=="ERROR"&&o.response.data.statusCode==500&&(this.isError=!0,this.msg=o.response.data.message)})},getBranches(){let o=["per_page=100","page=1"].join("&");this.$store.dispatch("getData",["branch",o]).then(r=>{this.branches=r.data}).catch(r=>{r.response.data.status=="ERROR"&&r.response.data.statusCode==500&&(this.isError=!0,this.msg=r.response.data.message)})},getDateBirth(o){return S(o).locale("id").format("YYYY-MM-DD")},handleSubmit(){this.isLoading=!0,this.errors={},this.$store.dispatch("updateData",["user/branch",this.id,this.form]).then(o=>{$("#successModal").modal("show"),this.$emit("onCancel",!0),this.msg="data berhasil diperbaharui.",this.isLoading=!1}).catch(o=>{this.isLoading=!1,this.errors=o.response.data.messages,o.response.data.status=="ERROR"&&o.response.data.statusCode==500&&(this.isError=!0,this.msg=o.response.data.message)})}},components:{PageTitle:V,Success:C,Error:x}},N={class:"breadcrumb m-0"},M={class:"breadcrumb-item"},j={class:"breadcrumb-item"},A=i("li",{class:"breadcrumb-item active"},"Edit Pengguna",-1),F={class:"card"},Y={class:"card-body"},O={class:"mb-2"},J=i("label",null,"Cabang API",-1),z=["disabled"],H=i("option",{value:"",selected:"",disabled:""},null,-1),K=["value"],q={class:"mb-2"},G=i("label",null,"NIP",-1),Q=["disabled"],W={class:"mb-2"},X=i("label",null,"Nama Lengkap",-1),Z=["disabled"],ee={class:"mb-2"},se=i("label",null,"Email",-1),ie=["disabled"],re={class:"mb-2"},oe=i("label",null,"Telepon",-1),te=["disabled"],ne={class:"mb-2"},ae=i("label",null,"Tempat Lahir",-1),le=["disabled"],de={class:"mb-2"},me=i("label",null,"Tanggal Lahir",-1),ce=["disabled"],he={class:"mb-2"},ue=i("label",null,"Jenis Kelamin",-1),be=["disabled"],pe=i("option",{value:"",selected:"",disabled:""},null,-1),_e=i("option",{value:"L"},"Laki-laki",-1),fe=i("option",{value:"P"},"Perempuan",-1),ge=[pe,_e,fe],ve={class:"mb-2"},ke=i("label",null,"Jabatan",-1),ye=["disabled"],Be={class:"mb-2"},Le=i("label",null,"Alamat",-1),Pe=["disabled"],Ee={class:"card-footer border-top d-flex justify-content-between"},Ue={key:0,class:"btn btn-sm btn-primary"},Ve={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},xe=i("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function Ce(o,r,P,E,e,_){const p=y("router-link"),g=y("PageTitle"),v=y("Error"),k=y("Success");return t(),n(d,null,[f(g,{title:"Edit Pengguna Admin Cabang"},{default:B(()=>[i("ol",N,[i("li",M,[f(p,{to:{name:"Dashboard"}},{default:B(()=>[L("Dashboard")]),_:1})]),i("li",j,[f(p,{to:{name:"User Branch"}},{default:B(()=>[L("Admin Cabang")]),_:1})]),A])]),_:1}),e.isError?(t(),R(v,{key:0,message:e.msg},null,8,["message"])):l("",!0),i("div",F,[i("form",{onSubmit:r[10]||(r[10]=T((...s)=>_.handleSubmit&&_.handleSubmit(...s),["prevent"]))},[i("div",Y,[i("div",O,[J,h(i("select",{class:u(["form-select form-validation",{"is-invalid":e.errors.branchId}]),"onUpdate:modelValue":r[0]||(r[0]=s=>e.form.branchId=s),disabled:e.isLoading},[H,(t(!0),n(d,null,m(e.branches,(s,a)=>(t(),n("option",{key:a,value:s.uuid},c(s.branchName),9,K))),128))],10,z),[[U,e.form.branchId]]),e.errors.branchId?(t(!0),n(d,{key:0},m(e.errors.branchId,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)]),i("div",q,[G,h(i("input",{type:"number",class:u(["form-control form-validation",{"is-invalid":e.errors.nip}]),"onUpdate:modelValue":r[1]||(r[1]=s=>e.form.nip=s),disabled:e.isLoading},null,10,Q),[[b,e.form.nip]]),e.errors.nip?(t(!0),n(d,{key:0},m(e.errors.nip,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)]),i("div",W,[X,h(i("input",{type:"text",class:u(["form-control form-validation",{"is-invalid":e.errors.name}]),"onUpdate:modelValue":r[2]||(r[2]=s=>e.form.name=s),disabled:e.isLoading},null,10,Z),[[b,e.form.name]]),e.errors.name?(t(!0),n(d,{key:0},m(e.errors.name,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)]),i("div",ee,[se,h(i("input",{type:"text",class:u(["form-control form-validation",{"is-invalid":e.errors.email}]),"onUpdate:modelValue":r[3]||(r[3]=s=>e.form.email=s),disabled:e.isLoading},null,10,ie),[[b,e.form.email]]),e.errors.email?(t(!0),n(d,{key:0},m(e.errors.email,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)]),i("div",re,[oe,h(i("input",{type:"number",class:u(["form-control form-validation",{"is-invalid":e.errors.phone}]),"onUpdate:modelValue":r[4]||(r[4]=s=>e.form.phone=s),disabled:e.isLoading},null,10,te),[[b,e.form.phone]]),e.errors.phone?(t(!0),n(d,{key:0},m(e.errors.phone,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)]),i("div",ne,[ae,h(i("input",{type:"text",class:u(["form-control form-validation",{"is-invalid":e.errors.birthPlace}]),"onUpdate:modelValue":r[5]||(r[5]=s=>e.form.birthPlace=s),disabled:e.isLoading},null,10,le),[[b,e.form.birthPlace]]),e.errors.birthPlace?(t(!0),n(d,{key:0},m(e.errors.birthPlace,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)]),i("div",de,[me,h(i("input",{type:"date",class:u(["form-control form-validation",{"is-invalid":e.errors.dateBirth}]),"onUpdate:modelValue":r[6]||(r[6]=s=>e.form.dateBirth=s),disabled:e.isLoading},null,10,ce),[[b,e.form.dateBirth]]),e.errors.dateBirth?(t(!0),n(d,{key:0},m(e.errors.dateBirth,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)]),i("div",he,[ue,h(i("select",{class:u(["form-select form-validation",{"is-invalid":e.errors.gender}]),"onUpdate:modelValue":r[7]||(r[7]=s=>e.form.gender=s),disabled:e.isLoading},ge,10,be),[[U,e.form.gender]]),e.errors.gender?(t(!0),n(d,{key:0},m(e.errors.gender,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)]),i("div",ve,[ke,h(i("input",{type:"text",class:u(["form-control form-validation",{"is-invalid":e.errors.position}]),"onUpdate:modelValue":r[8]||(r[8]=s=>e.form.position=s),disabled:e.isLoading},null,10,ye),[[b,e.form.position]]),e.errors.position?(t(!0),n(d,{key:0},m(e.errors.position,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)]),i("div",Be,[Le,h(i("textarea",{class:u(["form-control form-validation",{"is-invalid":e.errors.address}]),"onUpdate:modelValue":r[9]||(r[9]=s=>e.form.address=s),disabled:e.isLoading},`\r
                    `,10,Pe),[[b,e.form.address]]),e.errors.address?(t(!0),n(d,{key:0},m(e.errors.address,(s,a)=>(t(),n("div",{class:"invalid-feedback",key:a},c(s)+". ",1))),128)):l("",!0)])]),i("div",Ee,[f(p,{to:{name:"User Branch"},class:"btn btn-sm btn-secondary",disabled:e.isLoading},{default:B(()=>[L("Batal")]),_:1},8,["disabled"]),e.isLoading?l("",!0):(t(),n("button",Ue," Simpan ")),e.isLoading?(t(),n("button",Ve,[xe,L(" Harap Tunggu... ")])):l("",!0)])],32)]),f(k,{url:{name:"User Branch"},msg:e.msg},null,8,["msg"])],64)}const Ne=I(w,[["render",Ce]]);export{Ne as default};
