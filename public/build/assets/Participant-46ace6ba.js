import{L as T}from"./Loader-d224f607.js";import{P as w}from"./PageTitle-7562df40.js";import{P as B}from"./Pagination-9fc7bd0d.js";import{C as I}from"./Confirm-8431c8a7.js";import{S as M}from"./Success-4d6c84cb.js";import{E as N}from"./Edit-5df78938.js";import{U as j}from"./util-54581a61.js";import{_ as O,r as d,o as n,c as o,g as u,w as h,a as e,b as c,d as b,f as r,k as _,v as k,F as g,l as y,t as v,j as x,n as U}from"./app-b56b39b4.js";import"./id-31fcb1a5.js";const W={props:["id"],data(){return{userId:null,users:[],examPacket:null,errors:{},pagination:{perPage:10,page:1},filters:{search:""},metaPagination:{},form:{valuePractice:""},date:null,isLoading:!1,examId:null,keyPacket:"",msg:""}},mounted(){this.getWelderHasExamPacket(),this.getExamPacket(),this.keyPacket=j.randomString(8)},methods:{getExamPacket(){this.isLoading=!0,this.$store.dispatch("showData",["exam-packet",this.id]).then(i=>{this.isLoading=!1,this.examPacket=i.data,Object.assign(this.examPacket,{date:i.data.schedule.slice(0,10)})}).catch(i=>{this.isLoading=!1})},getWelderHasExamPacket(){this.isLoading=!0;let i=[`per_page=${this.pagination.perPage}`,`page=${this.pagination.page}`,`search=${this.filters.search}`,`exam_packet_id=${this.id}`];this.$store.dispatch("getData",["user-exam-packet",i.join("&")]).then(s=>{this.isLoading=!1,this.users=s.data,this.metaPagination=s.meta}).catch(s=>{this.isLoading=!1})},handleSubmit(){this.errors={},this.isLoading=!0,Object.assign(this.form,{userId:this.userId,examPacketId:this.id}),this.$store.dispatch("postData",["user-exam-packet/insert-value-practice",this.form]).then(i=>{this.isLoading=!1,this.getWelderHasExamPacket(),$("#insertValuePractice").modal("hide")}).catch(i=>{this.isLoading=!1,this.errors=i.response.data.messages})},handleResetKey(){this.isLoading=!0;const i={userId:this.userId,examPacketId:this.id,keyPacket:this.keyPacket};this.$store.dispatch("postData",["user-exam-packet/update-key-packet",i]).then(s=>{this.isLoading=!1,this.getWelderHasExamPacket(),$("#resetKeyPacket").modal("hide")}).catch(s=>{this.isLoading=!1,this.errors=s.response.data.messages})},onSuccessEdit(){this.getExamPacket(),this.msg="data berhasil diperbaharui.",$("#successModal").modal("show")},onPageChange(i){this.pagination.page=i,this.getWelderHasExamPacket()},onSearch(){setTimeout(()=>{this.getWelderHasExamPacket()},1e3)},onBack(i){this.$router.push({name:"Exam Packet"})}},components:{PageTitle:w,Success:M,Edit:N,Confirm:I,Loader:T,Pagination:B}},R={class:"breadcrumb m-0"},A={class:"breadcrumb-item"},F={class:"breadcrumb-item"},z=e("span",null," Uji Kompetensi ",-1),q={class:"breadcrumb-item"},G=e("span",null," Detail Paket ",-1),J=e("li",{class:"breadcrumb-item active"},"Peserta",-1),Q={class:"card position-relative"},X={class:"card-header d-flex justify-content-between align-items-center"},Y=e("h4",null,"Daftar Peserta",-1),Z={class:"d-md-flex justify-content-between align-items-center"},ee={class:"me-md-2 me-0"},te={class:"card-body"},se={class:"table-responsive"},ae={class:"table table-bordered table-hover"},ie=e("thead",null,[e("tr",null,[e("th",null,"No."),e("th",null,"Nama Peserta"),e("th",null,"Nilai Praktek"),e("th",null,"Aksi")])],-1),ne={key:0},oe=e("td",{colspan:"4",class:"text-center"}," belum ada peserta yang daftar ",-1),re=[oe],le=["innerHTML"],de=["innerHTML"],ce=["onClick"],me=["onClick"],ue={class:"modal fade",id:"resetKeyPacket",tabindex:"-1","aria-labelledby":"resetKeyPacketLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},he={class:"modal-dialog modal-dialog-centered"},be={class:"modal-content"},pe=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"resetKeyPacketLabel"}," Reset Kunci Paket ")],-1),_e={class:"modal-body"},ke=e("label",null,"Kunci Paket ",-1),ge={class:"modal-footer"},Pe=e("button",{type:"button",class:"btn btn-sm btn-secondary","data-bs-dismiss":"modal"}," Batal ",-1),fe={key:0,class:"btn btn-sm btn-primary"},ye={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},ve=e("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1),xe={class:"modal fade",id:"insertValuePractice",tabindex:"-1","aria-labelledby":"insertValuePracticeLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},Le={class:"modal-dialog modal-dialog-centered"},Ee={class:"modal-content"},Se=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"insertValuePracticeLabel"}," Masukan Nilai Praktek ")],-1),Ce={class:"modal-body"},Ke=e("label",null,[b("Masukan Nilai Praktek "),e("span",{class:"small text-muted"},"(masukan 1 - 100)")],-1),De=["disabled"],Ve={class:"modal-footer"},He={key:0,class:"btn btn-sm btn-primary"},Te={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},we=e("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function Be(i,s,L,Ie,t,l){var P;const p=d("router-link"),E=d("PageTitle"),S=d("Edit"),C=d("Loader"),K=d("Pagination"),D=d("Success"),V=d("Confirm");return n(),o(g,null,[t.examPacket?(n(),u(E,{key:0,title:"Daftar Peserta Uji Kompetensi",isBack:!0,onOnBack:s[0]||(s[0]=a=>l.onBack(a))},{default:h(()=>[e("ol",R,[e("li",A,[c(p,{to:{name:"Dashboard"}},{default:h(()=>[b("Dashboard")]),_:1})]),e("li",F,[c(p,{to:{name:"Exam Packet"}},{default:h(()=>[z]),_:1})]),e("li",q,[c(p,{to:{name:"Exam Packet Detail",params:{id:L.id}}},{default:h(()=>[G]),_:1},8,["to"])]),J])]),_:1})):r("",!0),t.examPacket?(n(),u(S,{key:1,examPacket:t.examPacket,onOnSuccessEdit:l.onSuccessEdit},null,8,["examPacket","onOnSuccessEdit"])):r("",!0),e("div",Q,[t.isLoading?(n(),u(C,{key:0})):r("",!0),e("div",X,[Y,e("div",Z,[e("div",ee,[i.$can("search","Adminbranch")?_((n(),o("input",{key:0,type:"search",class:"form-control",placeholder:"pencarian",onKeyup:s[1]||(s[1]=(...a)=>l.onSearch&&l.onSearch(...a)),"onUpdate:modelValue":s[2]||(s[2]=a=>t.filters.search=a)},null,544)),[[k,t.filters.search]]):r("",!0)]),i.$can("pagination","Exampacket")?(n(),u(K,{key:0,pagination:t.metaPagination,onOnPageChange:s[3]||(s[3]=a=>l.onPageChange(a))},null,8,["pagination"])):r("",!0)])]),e("div",te,[e("div",se,[e("table",ae,[ie,e("tbody",null,[((P=t.users)==null?void 0:P.length)<1?(n(),o("tr",ne,re)):(n(!0),o(g,{key:1},y(t.users,(a,m)=>{var f;return n(),o("tr",{key:m},[e("th",{innerHTML:m+1},null,8,le),e("td",{innerHTML:(f=a.user)==null?void 0:f.name},null,8,de),e("td",null,v(a.practiceValue??0),1),e("td",null,[e("button",{onClick:H=>t.userId=a.user.uuid,"data-bs-toggle":"modal","data-bs-target":"#insertValuePractice",class:"btn btn-primary btn-sm me-2 text-white"}," Masukan Nilai Praktek ",8,ce),e("button",{onClick:H=>t.userId=a.user.uuid,"data-bs-toggle":"modal","data-bs-target":"#resetKeyPacket",class:"btn btn-warning btn-sm me-2 text-white"}," Reset Kunci Paket ",8,me)])])}),128))])])])])]),e("div",ue,[e("div",he,[e("div",be,[pe,e("form",{onSubmit:s[5]||(s[5]=x((...a)=>l.handleResetKey&&l.handleResetKey(...a),["prevent"])),method:"post"},[e("div",_e,[e("div",null,[ke,_(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=a=>t.keyPacket=a),readonly:""},null,512),[[k,t.keyPacket]])])]),e("div",ge,[Pe,t.isLoading?r("",!0):(n(),o("button",fe," Kirim ")),t.isLoading?(n(),o("button",ye,[ve,b(" Harap Tunggu... ")])):r("",!0)])],32)])])]),e("div",xe,[e("div",Le,[e("div",Ee,[Se,e("form",{onSubmit:s[8]||(s[8]=x((...a)=>l.handleSubmit&&l.handleSubmit(...a),["prevent"])),method:"post"},[e("div",Ce,[e("div",null,[Ke,_(e("input",{type:"number",class:U(["form-control",{"is-invalid":t.errors.valuePractice}]),"onUpdate:modelValue":s[6]||(s[6]=a=>t.form.valuePractice=a),disabled:t.isLoading,max:"100",min:"0"},null,10,De),[[k,t.form.valuePractice]]),t.errors.valuePractice?(n(!0),o(g,{key:0},y(t.errors.valuePractice,(a,m)=>(n(),o("div",{class:"invalid-feedback",key:m},v(a),1))),128)):r("",!0)])]),e("div",Ve,[e("button",{type:"button",class:"btn btn-sm btn-secondary","data-bs-dismiss":"modal",onClick:s[7]||(s[7]=a=>(t.form.valuePractice=0,t.errors={}))}," Batal "),t.isLoading?r("",!0):(n(),o("button",He," Kirim ")),t.isLoading?(n(),o("button",Te,[we,b(" Harap Tunggu... ")])):r("",!0)])],32)])])]),c(D,{msg:t.msg},null,8,["msg"]),c(V,{onOnDelete:i.onDeleteExam},null,8,["onOnDelete"])],64)}const ze=O(W,[["render",Be]]);export{ze as default};
