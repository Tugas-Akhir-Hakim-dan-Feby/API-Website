import{L as B}from"./Loader-23963e21.js";import{S as N}from"./Success-fceae0fd.js";import{P as x}from"./PageTitle-8d560208.js";import{_ as R,e as z,r as g,o as r,c as n,b as S,a as s,k as _,v,n as h,F as c,l as u,t as a,f as d,m as b,w as T,d as k,j as I,g as w}from"./app-34ea7cd5.js";import{U as A}from"./util-54581a61.js";const E={props:["slug"],data(){return{isLoading:!1,form:{welderSkillIds:[],residentIdCard:"",dateBirth:"",birthPlace:"",citizenship:"",village:"",district:"",regency:"",province:"",zipCode:"",phone:"",workingStatus:"",documentPasPhoto:"",documentCurriculumVitae:"",documentCertificateCompetency:""},isRegency:!0,isDistrict:!0,isVillage:!0,errors:{},provinces:[],regencies:[],districts:[],villages:[]}},computed:{formData(){let o=new FormData;for(let t=0;t<this.form.welderSkillIds.length;t++)o.append(`welder_skill_ids[${t}]`,this.form.welderSkillIds[t]);return o.append("resident_id_card",this.form.residentIdCard),o.append("date_birth",this.form.dateBirth),o.append("birth_place",this.form.birthPlace),o.append("citizenship",this.form.citizenship),o.append("village",this.form.village),o.append("district",this.form.district),o.append("regency",this.form.regency),o.append("province",this.form.province),o.append("zip_code",this.form.zipCode),o.append("phone",this.form.phone),o.append("document_curriculum_vitae",this.form.documentCurriculumVitae),o.append("working_status",this.form.workingStatus),o.append("document_pas_photo",this.form.documentPasPhoto),o.append("document_certificate_competency",this.form.documentCertificateCompetency),o}},mounted(){this.getProvince(),this.getWelderSkills()},methods:{getProvince(){fetch(this.$store.state.BASE_URL_REGION+"provinces.json").then(o=>o.json()).then(o=>{this.provinces=o})},getRegency(o){fetch(`${this.$store.state.BASE_URL_REGION}regencies/${o.target.value}.json`).then(t=>t.json()).then(t=>{this.regencies=t,this.$refs.regency.value=""})},getDistrict(o){fetch(`${this.$store.state.BASE_URL_REGION}districts/${o.target.value}.json`).then(t=>t.json()).then(t=>{this.districts=t,this.$refs.district.value=""})},getVillage(o){fetch(`${this.$store.state.BASE_URL_REGION}villages/${o.target.value}.json`).then(t=>t.json()).then(t=>{this.villages=t,this.$refs.village.value=""})},getWelderSkills(){$(this.$refs.welderSkill).select2({ajax:{url:`${this.$store.state.BASE_URL}/api/v1/skill/welder`,dataType:"json",headers:{Authorization:"Bearer "+z.get("token")},delay:250,data:function(o){return{search:o.term,per_page:20}},processResults:function(o){return{results:o.data.map(t=>({id:t.uuid,text:t.skill_name}))}},cache:!0}}),$(this.$refs.welderSkill).on("change",()=>{this.form.welderSkillIds=$(this.$refs.welderSkill).val(),$(".select2-hidden-accessible").removeClass("is-invalid")})},handleSubmit(){this.isLoading=!0,this.$store.dispatch("postDataUpload",["user/personal-data",this.formData]).then(o=>{this.isLoading=!1,$("#successModal").modal("show")}).catch(o=>{this.isLoading=!1,this.errors=o.response.data.messages})},onBack(){this.$router.push({name:"Job Vacancy Detail",params:{slug:this.slug}})},onOk(){this.$emit("onSuccess",!0)},uploadCurriculumVitae(o){this.form.documentCurriculumVitae=o.target.files[0]},uploadPasPhoto(o){this.form.documentPasPhoto=o.target.files[0]},uploadCertificateCompetency(o){this.form.documentCertificateCompetency=o.target.files[0]}},components:{PageTitle:x,Loader:B,Success:N}},K={class:"card"},J={class:"card-body"},M={class:"row"},O={class:"col-md-6"},W={class:"mb-3"},G=s("label",null,"NIK",-1),F=["disabled"],H={class:"col-md-6"},q={class:"mb-3"},Q=s("label",null,"Status Bekerja",-1),X=["disabled"],Y=s("option",{disabled:"",selected:""},null,-1),Z=s("option",{value:"1"},"Sudah Pernah Bekerja",-1),ee=s("option",{value:"0"},"Belum Pernah Bekerja",-1),se=[Y,Z,ee],ie={class:"col-md-6"},te={class:"mb-3"},oe=s("label",null,"Tempat Lahir",-1),re=["disabled"],ne={class:"col-md-6"},le={class:"mb-3"},ae=s("label",null,"Tanggal Lahir",-1),de=["disabled"],ce={class:"col-md-6"},ue={class:"mb-3"},me=s("label",null,"Jenis Kompetensi",-1),he=["disabled"],pe={class:"col-md-6"},_e={class:"mb-3"},be=s("label",null,"Kewarganegaraan",-1),ve=["disabled"],ge=s("option",{disabled:"",selected:""},null,-1),fe=s("option",{value:"WNI"}," Warga Negara Indonesia ",-1),ke=s("option",{value:"WNA"},"Warga Negara Asing",-1),ye=[ge,fe,ke],Pe={class:"col-md-6"},Ce={class:"mb-3"},Se=s("label",null,"Provinsi",-1),we=["disabled"],Ve=s("option",{disabled:"",selected:""},null,-1),Le=["value"],je={class:"col-md-6"},De={class:"mb-3"},Be=s("label",null,"Kota/Kabupaten",-1),Ne=["disabled"],xe=s("option",{disabled:"",selected:""},null,-1),Re=["value"],Ie={class:"col-md-6"},Ue={class:"mb-3"},ze=s("label",null,"Kecamatan",-1),Te=["disabled"],Ae=s("option",{disabled:"",selected:""},null,-1),Ee=["value"],Ke={class:"col-md-6"},Je={class:"mb-3"},Me=s("label",null,"Desa/Kelurahan",-1),Oe=["disabled"],We=s("option",{disabled:"",selected:""},null,-1),Ge=["value"],Fe={class:"col-md-6"},He={class:"mb-3"},qe=s("label",null,"Kode Pos",-1),Qe=["disabled"],Xe={class:"col-md-6"},Ye={class:"mb-3"},Ze=s("label",null,"No Telepon",-1),$e=["disabled"],es={class:"col-md-6"},ss={class:"mb-3"},is=s("label",null,"Pas Foto Formal Berwarna",-1),ts=["disabled"],os={class:"col-md-6"},rs={class:"mb-3"},ns=s("label",null,"Sertifikat Pelatihan/Kompetensi Keahlian Pengelasan ",-1),ls=["disabled"],as={class:"col-md-6"},ds={class:"mb-3"},cs=s("label",null,"Daftar Riwayat Hidup",-1),us=["disabled"],ms={class:"card-footer d-flex justify-content-between"},hs={key:0,class:"btn btn-sm btn-primary"},ps={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},_s=s("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function bs(o,t,V,U,e,m){const y=g("PageTitle"),P=g("router-link"),C=g("Success");return r(),n(c,null,[S(y,{title:"Data Diri Pekerja",isBack:!0,onOnBack:t[0]||(t[0]=i=>m.onBack())}),s("form",{onSubmit:t[18]||(t[18]=I((...i)=>m.handleSubmit&&m.handleSubmit(...i),["prevent"])),method:"post"},[s("div",K,[s("div",J,[s("div",M,[s("div",O,[s("div",W,[G,_(s("input",{type:"number",class:h(["form-control",{"is-invalid":e.errors.residentIdCard}]),"onUpdate:modelValue":t[1]||(t[1]=i=>e.form.residentIdCard=i),disabled:e.isLoading},null,10,F),[[v,e.form.residentIdCard]]),e.errors.residentIdCard?(r(!0),n(c,{key:0},u(e.errors.residentIdCard,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",H,[s("div",q,[Q,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.workingStatus}]),"onUpdate:modelValue":t[2]||(t[2]=i=>e.form.workingStatus=i),disabled:e.isLoading},se,10,X),[[b,e.form.workingStatus]]),e.errors.workingStatus?(r(!0),n(c,{key:0},u(e.errors.workingStatus,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",ie,[s("div",te,[oe,_(s("input",{type:"text",class:h(["form-control",{"is-invalid":e.errors.birthPlace}]),"onUpdate:modelValue":t[3]||(t[3]=i=>e.form.birthPlace=i),disabled:e.isLoading},null,10,re),[[v,e.form.birthPlace]]),e.errors.birthPlace?(r(!0),n(c,{key:0},u(e.errors.birthPlace,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",ne,[s("div",le,[ae,_(s("input",{type:"date",class:h(["form-control",{"is-invalid":e.errors.dateBirth}]),"onUpdate:modelValue":t[4]||(t[4]=i=>e.form.dateBirth=i),disabled:e.isLoading},null,10,de),[[v,e.form.dateBirth]]),e.errors.dateBirth?(r(!0),n(c,{key:0},u(e.errors.dateBirth,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",ce,[s("div",ue,[me,s("select",{class:h(["select2-hidden-accessible form-select",{"is-invalid":e.errors.welderSkillIds}]),ref:"welderSkill",disabled:e.isLoading,multiple:""},null,10,he),e.errors.welderSkillIds?(r(!0),n(c,{key:0},u(e.errors.welderSkillIds,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",pe,[s("div",_e,[be,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.citizenship}]),"onUpdate:modelValue":t[5]||(t[5]=i=>e.form.citizenship=i),disabled:e.isLoading},ye,10,ve),[[b,e.form.citizenship]]),e.errors.citizenship?(r(!0),n(c,{key:0},u(e.errors.citizenship,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",Pe,[s("div",Ce,[Se,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.province}]),"onUpdate:modelValue":t[6]||(t[6]=i=>e.form.province=i),disabled:e.isLoading,onChange:t[7]||(t[7]=i=>(e.isRegency=!1,m.getRegency(i)))},[Ve,(r(!0),n(c,null,u(e.provinces,(i,l)=>(r(),n("option",{key:l,value:i.id},a(i.name),9,Le))),128))],42,we),[[b,e.form.province]]),e.errors.province?(r(!0),n(c,{key:0},u(e.errors.province,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",je,[s("div",De,[Be,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.regency}]),"onUpdate:modelValue":t[8]||(t[8]=i=>e.form.regency=i),disabled:e.isLoading||e.isRegency,ref:"regency",onChange:t[9]||(t[9]=i=>(e.isDistrict=!1,m.getDistrict(i)))},[xe,(r(!0),n(c,null,u(e.regencies,(i,l)=>(r(),n("option",{key:l,value:i.id},a(i.name),9,Re))),128))],42,Ne),[[b,e.form.regency]]),e.errors.regency?(r(!0),n(c,{key:0},u(e.errors.regency,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",Ie,[s("div",Ue,[ze,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.district}]),"onUpdate:modelValue":t[10]||(t[10]=i=>e.form.district=i),disabled:e.isLoading||e.isDistrict,ref:"district",onChange:t[11]||(t[11]=i=>(e.isVillage=!1,m.getVillage(i)))},[Ae,(r(!0),n(c,null,u(e.districts,(i,l)=>(r(),n("option",{key:l,value:i.id},a(i.name),9,Ee))),128))],42,Te),[[b,e.form.district]]),e.errors.district?(r(!0),n(c,{key:0},u(e.errors.district,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",Ke,[s("div",Je,[Me,_(s("select",{class:h(["form-select",{"is-invalid":e.errors.village}]),ref:"village","onUpdate:modelValue":t[12]||(t[12]=i=>e.form.village=i),disabled:e.isLoading||e.isVillage},[We,(r(!0),n(c,null,u(e.villages,(i,l)=>(r(),n("option",{key:l,value:i.id},a(i.name),9,Ge))),128))],10,Oe),[[b,e.form.village]]),e.errors.village?(r(!0),n(c,{key:0},u(e.errors.village,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",Fe,[s("div",He,[qe,_(s("input",{type:"text",class:h(["form-control",{"is-invalid":e.errors.zipCode}]),"onUpdate:modelValue":t[13]||(t[13]=i=>e.form.zipCode=i),disabled:e.isLoading},null,10,Qe),[[v,e.form.zipCode]]),e.errors.zipCode?(r(!0),n(c,{key:0},u(e.errors.zipCode,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",Xe,[s("div",Ye,[Ze,_(s("input",{type:"number",class:h(["form-control",{"is-invalid":e.errors.phone}]),"onUpdate:modelValue":t[14]||(t[14]=i=>e.form.phone=i),disabled:e.isLoading},null,10,$e),[[v,e.form.phone]]),e.errors.phone?(r(!0),n(c,{key:0},u(e.errors.phone,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",es,[s("div",ss,[is,s("input",{type:"file",class:h(["form-control",{"is-invalid":e.errors.documentPasPhoto}]),disabled:e.isLoading,onChange:t[15]||(t[15]=(...i)=>m.uploadPasPhoto&&m.uploadPasPhoto(...i))},null,42,ts),e.errors.documentPasPhoto?(r(!0),n(c,{key:0},u(e.errors.documentPasPhoto,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",os,[s("div",rs,[ns,s("input",{type:"file",class:h(["form-control",{"is-invalid":e.errors.documentCertificateCompetency}]),disabled:e.isLoading,onChange:t[16]||(t[16]=(...i)=>m.uploadCertificateCompetency&&m.uploadCertificateCompetency(...i))},null,42,ls),e.errors.documentCertificateCompetency?(r(!0),n(c,{key:0},u(e.errors.documentCertificateCompetency,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])]),s("div",as,[s("div",ds,[cs,s("input",{type:"file",class:h(["form-control",{"is-invalid":e.errors.documentCurriculumVitae}]),disabled:e.isLoading,onChange:t[17]||(t[17]=(...i)=>m.uploadCurriculumVitae&&m.uploadCurriculumVitae(...i))},null,42,us),e.errors.documentCurriculumVitae?(r(!0),n(c,{key:0},u(e.errors.documentCurriculumVitae,(i,l)=>(r(),n("div",{class:"invalid-feedback",key:l},a(i),1))),128)):d("",!0)])])])]),s("div",ms,[S(P,{to:{name:"Job Vacancy",params:{uuid:o.uuid}},class:"btn btn-sm btn-secondary",disabled:e.isLoading},{default:T(()=>[k("Batal")]),_:1},8,["to","disabled"]),e.isLoading?d("",!0):(r(),n("button",hs," Simpan ")),e.isLoading?(r(),n("button",ps,[_s,k(" Harap Tunggu... ")])):d("",!0)])])],32),S(C,{msg:"data berhasil disimpan."},null,8,["msg"])],64)}const vs=R(E,[["render",bs]]),gs=[{value:"Tidak ada pengalaman"},{value:"Kurang dari 1 tahun"},{value:"1 tahun"},{value:"2 tahun"},{value:"3 tahun"},{value:"4 tahun"},{value:"5 tahun"},{value:"Lebih dari 5 tahun"}],fs={props:["slug"],data(){return{isLoading:!1,isRegistered:0,isNullPersonalData:!1,form:{experience:"",promote:"",jobVacancyId:""},jobVacancy:{},experiences:[],errors:{}}},watch:{isNullPersonalData(o){this.isNullPersonalData=o}},mounted(){this.getUser(),this.getExperience(),this.getJobVacancy()},methods:{getUser(){this.$store.dispatch("showData",["user","me"]).then(o=>{this.getDataPersonal(o.user)}).catch(o=>{})},getExperience(){this.experiences=gs},getDataPersonal(o){this.$store.dispatch("showData",["user/personal-data",o.uuid]).then(t=>{}).catch(t=>{t.response.data.statusCode==404&&t.response.data.status=="WARNING"&&(this.isNullPersonalData=!0)})},getJobVacancy(){this.$store.dispatch("showData",["job-vacancy/show-by-slug",this.slug]).then(o=>{this.jobVacancy=o.data,this.checkJobRegister(o.data.uuid)})},getRupiah(o){return A.getRupiah(o)},handleSubmit(){this.isLoading=!0,this.errors={},this.form.jobVacancyId=this.jobVacancy.uuid,this.$store.dispatch("postData",["register-job",this.form]).then(o=>{this.isLoading=!1,$("#successModal").modal("show")}).catch(o=>{this.isLoading=!1,this.errors=o.response.data.messages})},checkJobRegister(o){this.$store.dispatch("showData",["register-job/check",o]).then(t=>{t&&this.$router.back()})},onSuccess(){this.isNullPersonalData=!1}},components:{PageTitle:x,Loader:B,Success:N,DataPersonal:vs}},ks={key:1},ys={class:"row"},Ps={class:"col-md-4"},Cs={class:"card"},Ss={class:"card-body"},ws={class:"row"},Vs={class:"col-md-4 col-sm-12"},Ls=["src","alt"],js={class:"col-md-8 col-sm-12"},Ds={class:"mt-md-0"},Bs=s("p",{class:"fw-bold m-0"},"Perkiraan Gaji",-1),Ns=s("p",{class:"fw-bold m-0"},"Jenis Pekerjaan",-1),xs=s("p",{class:"fw-bold m-0"},"Penempatan",-1),Rs={class:"col-md-8"},Is={class:"card"},Us={class:"card-body"},zs={class:"mb-3"},Ts={class:"text-lowercase"},As=["disabled"],Es=s("option",{disabled:"",selected:""},null,-1),Ks=["value"],Js={class:"mb-3"},Ms=s("label",null,"Promosikan diri Anda! ",-1),Os=["disabled"],Ws={class:"card-footer text-center"},Gs={key:0,class:"btn btn-sm btn-primary"},Fs={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},Hs=s("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function qs(o,t,V,U,e,m){var i,l,L,j,D;const y=g("PageTitle"),P=g("DataPersonal"),C=g("Success");return r(),n(c,null,[e.isNullPersonalData?d("",!0):(r(),w(y,{key:0,title:"Lamar Pekerjaan",isBack:!0,onOnBack:t[0]||(t[0]=p=>o.onBack())})),e.isNullPersonalData?d("",!0):(r(),n("div",ks,[s("form",{onSubmit:t[3]||(t[3]=I((...p)=>m.handleSubmit&&m.handleSubmit(...p),["prevent"])),method:"post"},[s("div",ys,[s("div",Ps,[s("div",Cs,[s("div",Ss,[s("div",ws,[s("div",Vs,[s("img",{src:(i=e.jobVacancy.companyMember)==null?void 0:i.companyLogo,alt:(l=e.jobVacancy.companyMember)==null?void 0:l.companyName,height:"50"},null,8,Ls)]),s("div",js,[s("h5",Ds,a((L=e.jobVacancy.welderSkill)==null?void 0:L.skillName),1),s("p",null,a((j=e.jobVacancy.companyMember)==null?void 0:j.companyName),1)])]),s("div",null,[Bs,s("p",null,a(m.getRupiah(e.jobVacancy.salary)),1)]),s("div",null,[Ns,s("p",null,a(e.jobVacancy.workType),1)]),s("div",null,[xs,s("p",null,a(e.jobVacancy.placement),1)])])])]),s("div",Rs,[s("div",Is,[s("div",Us,[s("div",zs,[s("label",null,[k("Berapa tahun pengalaman kerjamu sebagai "),s("span",Ts,a((D=e.jobVacancy.welderSkill)==null?void 0:D.skillName),1),k("?")]),_(s("select",{class:h(["form-select",{"is-invalid":e.errors.experience}]),"onUpdate:modelValue":t[1]||(t[1]=p=>e.form.experience=p),disabled:e.isLoading},[Es,(r(!0),n(c,null,u(e.experiences,(p,f)=>(r(),n("option",{key:f,value:p.value},a(p.value),9,Ks))),128))],10,As),[[b,e.form.experience]]),e.errors.experience?(r(!0),n(c,{key:0},u(e.errors.experience,(p,f)=>(r(),n("div",{class:"invalid-feedback",key:f},a(p),1))),128)):d("",!0)]),s("div",Js,[Ms,_(s("textarea",{class:h(["form-control",{"is-invalid":e.errors.promote}]),rows:"8","onUpdate:modelValue":t[2]||(t[2]=p=>e.form.promote=p),disabled:e.isLoading,placeholder:"Beritahu perusahaan mengapa Anda paling cocok untuk posisi ini. Sebutkan keterampilan khusus dan bagaimana Anda berkontribusi. Hindari hal generik seperti Saya bertanggung jawab."},null,10,Os),[[v,e.form.promote]]),e.errors.promote?(r(!0),n(c,{key:0},u(e.errors.promote,(p,f)=>(r(),n("div",{class:"invalid-feedback",key:f},a(p),1))),128)):d("",!0)])]),s("div",Ws,[e.isLoading?d("",!0):(r(),n("button",Gs," Kirim Lamaran ")),e.isLoading?(r(),n("button",Fs,[Hs,k(" Harap Tunggu... ")])):d("",!0)])])])])],32)])),e.isNullPersonalData?(r(),w(P,{key:2,onOnSuccess:t[4]||(t[4]=p=>m.onSuccess())})):d("",!0),e.isNullPersonalData?d("",!0):(r(),w(C,{key:3,url:{name:"Dashboard"},msg:"lamaran berhasil dikirim."},null,8,["msg"]))],64)}const ei=R(fs,[["render",qs]]);export{ei as default};
