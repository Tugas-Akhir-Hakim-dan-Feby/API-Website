import{S as U}from"./Success-c1d5e79e.js";import{C as E}from"./Confirm-ebc41aee.js";import{P as H}from"./PageTitle-598f0528.js";import{P as w}from"./Pagination-c3b4ca0e.js";import{U as B}from"./util-54581a61.js";import{P as S}from"./pagination-8c4016f1.js";import{L as A}from"./Loader-f854f6af.js";import{E as N}from"./Error-058c6d16.js";import{_ as x,r,o as s,c as l,b as h,w as m,g as u,f as d,a as e,k as V,v as O,F as P,l as R,d as p}from"./app-0b4e2ce8.js";const j={data(){return{uuid:null,users:[],pagination:{perPage:10,page:1},filters:{search:""},metaPagination:{},msg:"",isLoading:!1,isError:!1}},mounted(){this.getUsers()},methods:{iteration(t){return S.iteration(t,this.metaPagination)},getUsers(){this.isLoading=!0;let t=[`per_page=${this.pagination.perPage}`,`page=${this.pagination.page}`,`search=${this.filters.search}`].join("&");this.$store.dispatch("getData",["user/branch",t]).then(n=>{this.isLoading=!1,this.users=n.data,this.metaPagination=n.meta}).catch(n=>{this.isLoading=!1,console.log(n)})},getGender(t){return B.getGender(t)},handleDelete(){$("#confirmModal").modal("show")},onDelete(){$("#confirmModal").modal("hide"),$("#successModal").modal("show"),this.msg="data berhasil dihapus."},onUpdateStatus(t,n){this.isLoading=!0,this.errors={},this.$store.dispatch("updateData",["user/branch/update-status",t,{}]).then(c=>{this.isLoading=!1,this.msg="data berhasil diperbaharui.",this.getUsers(),$("#successModal").modal("show"),this.$emit("onCancel",!0)}).catch(c=>{this.isLoading=!1,c.response.data.status=="ERROR"&&c.response.data.statusCode==500&&(this.isError=!0,this.msg=c.response.data.message)})},onPageChange(t){this.pagination.page=t,this.getUsers()},onSearch(){setTimeout(()=>{this.getUsers()},1e3)},onDelete(){this.isLoading=!0,$("#confirmModal").modal("hide"),this.$store.dispatch("deleteData",["user/branch",this.uuid]).then(t=>{this.getUsers(),this.isLoading=!1,this.msg="data berhasil dihapus.",$("#successModal").modal("show")}).catch(t=>{this.isLoading=!1})},handleDelete(t){this.uuid=t,this.msg="apakah anda yakin data ini akan dihapus?",$("#confirmModal").modal("show")}},components:{Pagination:w,PageTitle:H,Success:U,Confirm:E,Loader:A,Error:N}},G={class:"breadcrumb m-0"},F={class:"breadcrumb-item"},J=e("li",{class:"breadcrumb-item active"},"Daftar Pengguna Admin Cabang",-1),K={class:"card position-relative"},I={class:"card-body"},q={class:"table-responsive"},z={class:"d-md-flex d-block justify-content-between align-items-center mb-2"},Q={key:0,class:"text-center"},W={class:"d-md-flex justify-content-between align-items-center"},X={class:"me-md-2 me-0"},Y={class:"table-responsive"},Z={class:"table table-hover table-bordered"},ee=e("thead",null,[e("tr",null,[e("th",null,"No."),e("th",null,"Nama Pengguna"),e("th",null,"Email Pengguna"),e("th",null,"Cabang"),e("th",null,"Jabatan"),e("th",null,"Jenis Kelamin"),e("th",null,"Aksi")])],-1),te={key:0},ae=e("td",{colspan:"7",class:"text-center"}," data pengguna admin cabang tidak ada ",-1),ne=[ae],se=["innerHTML"],ie=["innerHTML"],oe=["innerHTML"],re=["innerHTML"],le=["innerHTML"],de=["innerHTML"],ce=["onClick"];function he(t,n,c,me,i,o){const g=r("router-link"),M=r("PageTitle"),T=r("Error"),v=r("Loader"),y=r("Pagination"),C=r("Success"),D=r("Confirm");return s(),l(P,null,[h(M,{title:"Daftar Pengguna Admin Cabang"},{default:m(()=>[e("ol",G,[e("li",F,[h(g,{to:{name:"Dashboard"}},{default:m(()=>[p("Dashboard")]),_:1})]),J])]),_:1}),i.isError?(s(),u(T,{key:0,message:i.msg},null,8,["message"])):d("",!0),e("div",K,[i.isLoading?(s(),u(v,{key:0})):d("",!0),e("div",I,[e("div",q,[e("div",z,[t.$can("create","Adminbranch")?(s(),l("div",Q,[h(g,{to:{name:"User Branch Create"},class:"btn btn-primary mb-2 btn-sm"},{default:m(()=>[p("Tambah Pengguna")]),_:1})])):d("",!0),e("div",W,[e("div",X,[t.$can("search","Adminbranch")?V((s(),l("input",{key:0,type:"search",class:"form-control",placeholder:"pencarian",onKeyup:n[0]||(n[0]=(...a)=>o.onSearch&&o.onSearch(...a)),"onUpdate:modelValue":n[1]||(n[1]=a=>i.filters.search=a)},null,544)),[[O,i.filters.search]]):d("",!0)]),t.$can("pagination","Adminbranch")?(s(),u(y,{key:0,pagination:i.metaPagination,onOnPageChange:n[2]||(n[2]=a=>o.onPageChange(a))},null,8,["pagination"])):d("",!0)])])]),e("div",Y,[e("table",Z,[ee,e("tbody",null,[i.users.length<1?(s(),l("tr",te,ne)):(s(!0),l(P,{key:1},R(i.users,(a,_)=>{var b,f,L,k;return s(),l("tr",{key:_},[e("th",{innerHTML:o.iteration(_)},null,8,se),e("td",{innerHTML:a.name},null,8,ie),e("td",{innerHTML:a.email},null,8,oe),e("td",{innerHTML:((f=(b=a.adminBranch)==null?void 0:b.branch)==null?void 0:f.branchName)??"-"},null,8,re),e("td",{innerHTML:(L=a.adminBranch)==null?void 0:L.position},null,8,le),e("td",{innerHTML:o.getGender((k=a.adminBranch)==null?void 0:k.gender)},null,8,de),e("td",null,[t.$can("update","Adminbranch")?(s(),u(g,{key:0,to:{name:"User Branch Edit",params:{id:a.uuid}},class:"btn btn-sm btn-warning me-2 text-white"},{default:m(()=>[p("Edit")]),_:2},1032,["to"])):d("",!0),t.$store.state.USER.uuid!=a.uuid?(s(),l("button",{key:1,class:"btn btn-sm btn-danger",onClick:ue=>o.handleDelete(a.uuid)}," Hapus ",8,ce)):d("",!0)])])}),128))])])])])]),h(C,{url:{name:"User Branch"},msg:i.msg},null,8,["msg"]),h(D,{onOnDelete:o.onDelete},null,8,["onOnDelete"])],64)}const Te=x(j,[["render",he]]);export{Te as default};
