import{C as V}from"./Confirm-37323e9f.js";import{S as k}from"./Success-e6c7690f.js";import{P as U}from"./PageTitle-01df425d.js";import{P as j}from"./Pagination-19014d10.js";import{L as O}from"./Loader-c4a25092.js";import{P as I}from"./pagination-8c4016f1.js";import{U as T}from"./util-54581a61.js";import{_ as y,r as h,o as a,c as o,a as s,k as u,v as m,n as p,F as b,l as _,t as f,f as l,d as L,j as A,b as g,w as S,g as C}from"./app-ecfa6876.js";const F={data(){return{form:{branchName:"",branchAddress:"",branchPhone:""},errors:{},isLoading:!1}},mounted(){T.removeInvalidClass()},methods:{onCancel(){this.$emit("onCancel",!0)},handleSubmit(){this.isLoading=!0,this.errors={},this.$store.dispatch("postData",["branch",this.form]).then(r=>{this.isLoading=!1,$("#successModal").modal("show"),this.$emit("onCancel",!0)}).catch(r=>{this.isLoading=!1,this.errors=r.response.data.messages})}},components:{Success:k}},z={class:"card"},K={class:"card-body"},q={class:"mb-2"},G=s("label",{for:"branchName"},"Nama Cabang",-1),J=["disabled"],Q={class:"mb-2"},R=s("label",{for:"branchAddress"},"Alamat Cabang",-1),W=["disabled"],X={class:"mb-2"},Y=s("label",{for:"branchPhone"},"No. Telepon Cabang",-1),Z=["disabled"],ee={class:"card-footer d-flex justify-content-between"},se=["disabled"],ne={key:0,class:"btn btn-sm btn-success"},te={key:1,class:"btn btn-sm btn-success",type:"button",disabled:""},ae=s("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function re(r,n,P,N,e,i){const v=h("Success");return a(),o(b,null,[s("form",{onSubmit:n[4]||(n[4]=A((...t)=>i.handleSubmit&&i.handleSubmit(...t),["prevent"])),method:"post"},[s("div",z,[s("div",K,[s("div",q,[G,u(s("input",{type:"text",class:p(["form-control form-validation",{"is-invalid":e.errors.branchName}]),id:"branchName","onUpdate:modelValue":n[0]||(n[0]=t=>e.form.branchName=t),disabled:e.isLoading},null,10,J),[[m,e.form.branchName]]),e.errors.branchName?(a(!0),o(b,{key:0},_(e.errors.branchName,(t,c)=>(a(),o("div",{class:"invalid-feedback",key:c},f(t)+". ",1))),128)):l("",!0)]),s("div",Q,[R,u(s("input",{type:"text",class:p(["form-control form-validation",{"is-invalid":e.errors.branchAddress}]),id:"branchAddress","onUpdate:modelValue":n[1]||(n[1]=t=>e.form.branchAddress=t),disabled:e.isLoading},null,10,W),[[m,e.form.branchAddress]]),e.errors.branchAddress?(a(!0),o(b,{key:0},_(e.errors.branchAddress,(t,c)=>(a(),o("div",{class:"invalid-feedback",key:c},f(t)+". ",1))),128)):l("",!0)]),s("div",X,[Y,u(s("input",{type:"number",class:p(["form-control form-validation",{"is-invalid":e.errors.branchPhone}]),id:"branchPhone","onUpdate:modelValue":n[2]||(n[2]=t=>e.form.branchPhone=t),disabled:e.isLoading},null,10,Z),[[m,e.form.branchPhone]]),e.errors.branchPhone?(a(!0),o(b,{key:0},_(e.errors.branchPhone,(t,c)=>(a(),o("div",{class:"invalid-feedback",key:c},f(t)+". ",1))),128)):l("",!0)])]),s("div",ee,[s("button",{class:"btn btn-sm btn-secondary",onClick:n[3]||(n[3]=(...t)=>i.onCancel&&i.onCancel(...t)),disabled:e.isLoading}," Batal ",8,se),e.isLoading?l("",!0):(a(),o("button",ne," Simpan ")),e.isLoading?(a(),o("button",te,[ae,L(" Harap Tunggu... ")])):l("",!0)])])],32),g(v,{msg:"data berhasil ditambahkan."},null,8,["msg"])],64)}const oe=y(F,[["render",re]]),ie={props:["uuid"],data(){return{branch:{},errors:{},isLoading:!1}},mounted(){this.getBranch(),T.removeInvalidClass()},methods:{onCancel(){this.$emit("onCancel",!0)},getBranch(){this.isLoading=!0,this.$store.dispatch("showData",["branch",this.uuid]).then(r=>{this.isLoading=!1,this.branch=r.data}).catch(r=>{this.isLoading=!1})},handleSubmit(){this.isLoading=!0,this.errors={},this.$store.dispatch("updateData",["branch",this.uuid,this.branch]).then(r=>{this.isLoading=!1,$("#successModal").modal("show"),this.$emit("onCancel",!0)}).catch(r=>{this.isLoading=!1,this.errors=r.response.data.messages})}},components:{Success:k}},le={class:"card"},de={class:"card-body"},ce={class:"mb-2"},he=s("label",{for:"branchName"},"Nama Cabang",-1),be=["disabled"],ue={class:"mb-2"},me=s("label",{for:"branchAddress"},"Alamat Cabang",-1),_e=["disabled"],ge={class:"mb-2"},pe=s("label",{for:"branchPhone"},"No. Telepon Cabang",-1),fe=["disabled"],ve={class:"card-footer d-flex justify-content-between"},Ce=["disabled"],ke={key:0,class:"btn btn-sm btn-success"},ye={key:1,class:"btn btn-sm btn-success",type:"button",disabled:""},Le=s("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function Pe(r,n,P,N,e,i){const v=h("Success");return a(),o(b,null,[s("form",{onSubmit:n[4]||(n[4]=A((...t)=>i.handleSubmit&&i.handleSubmit(...t),["prevent"])),method:"post"},[s("div",le,[s("div",de,[s("div",ce,[he,u(s("input",{type:"text",class:p(["form-control",{"is-invalid":e.errors.branchName}]),id:"branchName","onUpdate:modelValue":n[0]||(n[0]=t=>e.branch.branchName=t),disabled:e.isLoading},null,10,be),[[m,e.branch.branchName]]),e.errors.branchName?(a(!0),o(b,{key:0},_(e.errors.branchName,(t,c)=>(a(),o("div",{class:"invalid-feedback",key:c},f(t)+". ",1))),128)):l("",!0)]),s("div",ue,[me,u(s("input",{type:"text",class:p(["form-control",{"is-invalid":e.errors.branchAddress}]),id:"branchAddress","onUpdate:modelValue":n[1]||(n[1]=t=>e.branch.branchAddress=t),disabled:e.isLoading},null,10,_e),[[m,e.branch.branchAddress]]),e.errors.branchAddress?(a(!0),o(b,{key:0},_(e.errors.branchAddress,(t,c)=>(a(),o("div",{class:"invalid-feedback",key:c},f(t)+". ",1))),128)):l("",!0)]),s("div",ge,[pe,u(s("input",{type:"number",class:p(["form-control",{"is-invalid":e.errors.branchPhone}]),id:"branchPhone","onUpdate:modelValue":n[2]||(n[2]=t=>e.branch.branchPhone=t),disabled:e.isLoading},null,10,fe),[[m,e.branch.branchPhone]]),e.errors.branchPhone?(a(!0),o(b,{key:0},_(e.errors.branchPhone,(t,c)=>(a(),o("div",{class:"invalid-feedback",key:c},f(t)+". ",1))),128)):l("",!0)])]),s("div",ve,[s("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:n[3]||(n[3]=(...t)=>i.onCancel&&i.onCancel(...t)),disabled:e.isLoading}," Batal ",8,Ce),e.isLoading?l("",!0):(a(),o("button",ke," Simpan ")),e.isLoading?(a(),o("button",ye,[Le,L(" Harap Tunggu... ")])):l("",!0)])])],32),g(v,{msg:"data berhasil diperbaharui."},null,8,["msg"])],64)}const Ne=y(ie,[["render",Pe]]),Be={data(){return{uuid:null,msg:"",title:"Data Cabang",isLoading:!1,isCreate:!1,isEdit:!1,branches:[],pagination:{perPage:10,page:1},filters:{search:""},metaPagination:{}}},mounted(){this.getBranches()},methods:{iteration(r){return I.iteration(r,this.metaPagination)},getBranches(){this.isLoading=!0;let r=[`per_page=${this.pagination.perPage}`,`page=${this.pagination.page}`,`search=${this.filters.search}`].join("&");this.$store.dispatch("getData",["branch",r]).then(n=>{this.isLoading=!1,this.branches=n.data,this.metaPagination=n.meta}).catch(n=>{this.isLoading=!1})},handleDelete(r){this.uuid=r,$("#confirmModal").modal("show")},onCreate(){this.title="Tambah Cabang",this.isCreate=!0},onEdit(r){this.uuid=r,this.title="Edit Cabang",this.isEdit=!0},onCancel(){this.title="Data Cabang",this.isCreate=!1,this.isEdit=!1,this.getBranches()},onDelete(){this.isLoading=!0,$("#confirmModal").modal("hide"),this.$store.dispatch("deleteData",["branch",this.uuid]).then(r=>{this.isLoading=!1,$("#successModal").modal("show"),this.msg="data berhasil dihapus.",this.getBranches()}).catch(r=>{this.isLoading=!1})},onSearch(){setTimeout(()=>{this.getBranches()},1e3)},onPageChange(r){this.pagination.page=r,this.getBranches()}},components:{PageTitle:U,Pagination:j,CreateBranch:oe,EditBranch:Ne,Confirm:V,Success:k,Loader:O}},Se={class:"breadcrumb m-0"},Te={class:"breadcrumb-item"},Ae=s("li",{class:"breadcrumb-item active"},"Data Cabang",-1),De={key:2,class:"card"},we={class:"card-body position-relative"},Me={class:"d-md-flex d-block justify-content-between align-items-center mb-2"},xe={class:"text-center"},Ee={class:"d-md-flex justify-content-between align-items-center"},He={class:"me-md-2 me-0"},Ve={class:"table-responsive"},Ue={class:"table table-bordered table-hover"},je=s("thead",null,[s("tr",null,[s("th",null,"No"),s("th",null,"Nama Cabang"),s("th",null,"Alamat"),s("th",null,"No. Telepon"),s("th",null,"Aksi")])],-1),Oe={key:0},$e=s("td",{colspan:"5",class:"text-center"}," data cabang tidak ada ",-1),Ie=[$e],Fe=["innerHTML"],ze=["innerHTML"],Ke=["innerHTML"],qe=["innerHTML"],Ge=["onClick"],Je=["onClick"];function Qe(r,n,P,N,e,i){const v=h("router-link"),t=h("PageTitle"),c=h("CreateBranch"),D=h("EditBranch"),w=h("Loader"),M=h("Pagination"),x=h("Success"),E=h("Confirm");return a(),o(b,null,[g(t,{title:e.title},{default:S(()=>[s("ol",Se,[s("li",Te,[g(v,{to:{name:"Dashboard"}},{default:S(()=>[L("Dashboard")]),_:1})]),Ae])]),_:1},8,["title"]),e.isCreate?(a(),C(c,{key:0,onOnCancel:n[0]||(n[0]=d=>i.onCancel(r.$e))})):e.isEdit?(a(),C(D,{key:1,uuid:e.uuid,onOnCancel:n[1]||(n[1]=d=>i.onCancel(r.$e))},null,8,["uuid"])):(a(),o("div",De,[s("div",we,[e.isLoading?(a(),C(w,{key:0})):l("",!0),s("div",Me,[s("div",xe,[r.$can("create","Branch")?(a(),o("button",{key:0,class:"btn btn-primary btn-sm mb-2",onClick:n[2]||(n[2]=(...d)=>i.onCreate&&i.onCreate(...d))}," Tambah Cabang ")):l("",!0)]),s("div",Ee,[s("div",He,[r.$can("search","Branch")?u((a(),o("input",{key:0,type:"search",class:"form-control",placeholder:"pencarian",onKeyup:n[3]||(n[3]=(...d)=>i.onSearch&&i.onSearch(...d)),"onUpdate:modelValue":n[4]||(n[4]=d=>e.filters.search=d)},null,544)),[[m,e.filters.search]]):l("",!0)]),r.$can("pagination","Branch")?(a(),C(M,{key:0,pagination:e.metaPagination,onOnPageChange:n[5]||(n[5]=d=>i.onPageChange(d))},null,8,["pagination"])):l("",!0)])]),s("div",Ve,[s("table",Ue,[je,s("tbody",null,[e.branches.length<1?(a(),o("tr",Oe,Ie)):(a(!0),o(b,{key:1},_(e.branches,(d,B)=>(a(),o("tr",{key:B},[s("th",{innerHTML:i.iteration(B)},null,8,Fe),s("td",{innerHTML:d.branchName},null,8,ze),s("td",{innerHTML:d.branchAddress},null,8,Ke),s("td",{innerHTML:d.branchPhone},null,8,qe),s("td",null,[r.$can("update","Branch")?(a(),o("button",{key:0,onClick:H=>i.onEdit(d.uuid),class:"btn btn-warning btn-sm me-2 text-white"}," Edit ",8,Ge)):l("",!0),r.$can("delete","Branch")?(a(),o("button",{key:1,class:"btn btn-danger btn-sm",onClick:H=>i.handleDelete(d.uuid)}," Hapus ",8,Je)):l("",!0)])]))),128))])])])])])),g(x,{msg:e.msg},null,8,["msg"]),g(E,{onOnDelete:i.onDelete},null,8,["onOnDelete"])],64)}const ts=y(Be,[["render",Qe]]);export{ts as default};
