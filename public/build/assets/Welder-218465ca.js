import{P as S}from"./PageTitle-8d560208.js";import{S as P}from"./Success-fceae0fd.js";import{_ as w,e as I,r as v,o as r,c as l,b,a as i,k as _,v as f,n as m,F as d,l as a,t as c,f as u,m as p,w as L,d as g,j as V}from"./app-34ea7cd5.js";const B={components:{PageTitle:S,Success:P},data(){return{form:{welderSkillIds:[],residentIdCard:"",dateBirth:"",birthPlace:"",citizenship:"",village:"",district:"",regency:"",province:"",zipCode:"",phone:"",workingStatus:"",documentPasPhoto:"",documentCurriculumVitae:"",documentCertificateCompetency:""},welderSkills:[],errors:{},isLoading:!1,isRegency:!0,isDistrict:!0,isVillage:!0,provinces:[],regencies:[],districts:[],villages:[]}},mounted(){this.selectUtil(),this.getProvince();let o=JSON.parse(localStorage.getItem("isPayment"));o&&this.$router.push({name:"Show Invoice",params:{externalId:o.externalId,costId:"welderMember"}})},computed:{formData(){let o=new FormData;for(let t=0;t<this.form.welderSkillIds.length;t++)o.append(`welder_skill_ids[${t}]`,this.form.welderSkillIds[t]);return o.append("resident_id_card",this.form.residentIdCard),o.append("date_birth",this.form.dateBirth),o.append("birth_place",this.form.birthPlace),o.append("citizenship",this.form.citizenship),o.append("village",this.form.village),o.append("district",this.form.district),o.append("regency",this.form.regency),o.append("province",this.form.province),o.append("zip_code",this.form.zipCode),o.append("phone",this.form.phone),o.append("document_curriculum_vitae",this.form.documentCurriculumVitae),o.append("working_status",this.form.workingStatus),o.append("document_pas_photo",this.form.documentPasPhoto),o.append("document_certificate_competency",this.form.documentCertificateCompetency),o}},methods:{getProvince(){fetch(this.$store.state.BASE_URL_REGION+"provinces.json").then(o=>o.json()).then(o=>{this.provinces=o})},getRegency(o){fetch(`${this.$store.state.BASE_URL_REGION}regencies/${o.target.value}.json`).then(t=>t.json()).then(t=>{this.regencies=t,this.$refs.regency.value=""})},getDistrict(o){fetch(`${this.$store.state.BASE_URL_REGION}districts/${o.target.value}.json`).then(t=>t.json()).then(t=>{this.districts=t,this.$refs.district.value=""})},getVillage(o){fetch(`${this.$store.state.BASE_URL_REGION}villages/${o.target.value}.json`).then(t=>t.json()).then(t=>{this.villages=t,this.$refs.village.value=""})},onBack(){this.$router.push({name:"Member"})},handleSubmit(){this.isLoading=!0,this.errors={},this.$store.dispatch("postDataUpload",["user/welder-member",this.formData]).then(o=>{this.isLoading=!1,localStorage.setItem("isPayment",JSON.stringify({paymentType:"welderMember",externalId:o.data.externalId})),window.location.href="/invoice/"+o.data.externalId+"/welderMember"}).catch(o=>{this.isLoading=!1,this.errors=o.response.data.messages,o.response.data.status=="ERROR"&&o.response.data.statusCode==500&&(this.isError=!0,this.msg=o.response.data.message)})},selectUtil(){$(this.$refs.welderSkill).select2({ajax:{url:`${this.$store.state.BASE_URL}/api/v1/skill/welder`,dataType:"json",headers:{Authorization:"Bearer "+I.get("token")},delay:250,data:function(o){return{search:o.term,per_page:20}},processResults:function(o){return{results:o.data.map(t=>({id:t.uuid,text:t.skill_name}))}},cache:!0}}),$(this.$refs.welderSkill).on("change",()=>{this.form.welderSkillIds=$(this.$refs.welderSkill).val(),$(".select2-hidden-accessible").removeClass("is-invalid")})},uploadCurriculumVitae(o){this.form.documentCurriculumVitae=o.target.files[0]},uploadPasPhoto(o){this.form.documentPasPhoto=o.target.files[0]},uploadCertificateCompetency(o){this.form.documentCertificateCompetency=o.target.files[0]}}},R={class:"card"},U={class:"card-body"},z={class:"row"},x={class:"col-md-6"},D={class:"mb-3"},N=i("label",null,"NIK",-1),j=["disabled"],E={class:"col-md-6"},T={class:"mb-3"},K=i("label",null,"Status Bekerja",-1),M=["disabled"],O=i("option",{disabled:"",selected:""},null,-1),A=i("option",{value:"1"},"Sudah Pernah Bekerja",-1),W=i("option",{value:"0"},"Belum Pernah Bekerja",-1),F=[O,A,W],G={class:"col-md-6"},J={class:"mb-3"},H=i("label",null,"Tempat Lahir",-1),q=["disabled"],Q={class:"col-md-6"},X={class:"mb-3"},Y=i("label",null,"Tanggal Lahir",-1),Z=["disabled"],ee={class:"col-md-6"},se={class:"mb-3"},ie=i("label",null,"Jenis Kompetensi",-1),te=["disabled"],oe={class:"col-md-6"},re={class:"mb-3"},le=i("label",null,"Kewarganegaraan",-1),ne=["disabled"],de=i("option",{disabled:"",selected:""},null,-1),ae=i("option",{value:"WNI"}," Warga Negara Indonesia ",-1),ce=i("option",{value:"WNA"},"Warga Negara Asing",-1),ue=[de,ae,ce],me={class:"col-md-6"},he={class:"mb-3"},_e=i("label",null,"Provinsi",-1),pe=["disabled"],fe=i("option",{disabled:"",selected:""},null,-1),ve=["value"],be={class:"col-md-6"},ge={class:"mb-3"},ke=i("label",null,"Kota/Kabupaten",-1),ye=["disabled"],Ce=i("option",{disabled:"",selected:""},null,-1),Se=["value"],Pe={class:"col-md-6"},we={class:"mb-3"},Ie=i("label",null,"Kecamatan",-1),Le=["disabled"],Ve=i("option",{disabled:"",selected:""},null,-1),Be=["value"],Re={class:"col-md-6"},Ue={class:"mb-3"},ze=i("label",null,"Desa/Kelurahan",-1),xe=["disabled"],De=i("option",{disabled:"",selected:""},null,-1),Ne=["value"],je={class:"col-md-6"},Ee={class:"mb-3"},Te=i("label",null,"Kode Pos",-1),Ke=["disabled"],Me={class:"col-md-6"},Oe={class:"mb-3"},Ae=i("label",null,"No Telepon",-1),We=["disabled"],Fe={class:"col-md-6"},Ge={class:"mb-3"},Je=i("label",null,"Pas Foto Formal Berwarna",-1),He=["disabled"],qe={class:"col-md-6"},Qe={class:"mb-3"},Xe=i("label",null,"Sertifikat Pelatihan/Kompetensi Keahlian Pengelasan ",-1),Ye=["disabled"],Ze={class:"col-md-6"},$e={class:"mb-3"},es=i("label",null,"Daftar Riwayat Hidup",-1),ss=["disabled"],is={class:"card-footer border-top d-flex justify-content-between"},ts={key:0,class:"btn btn-sm btn-primary"},os={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},rs=i("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function ls(o,t,ns,ds,e,h){const k=v("PageTitle"),y=v("router-link"),C=v("Success");return r(),l(d,null,[b(k,{title:"Daftar Member Welder",isBack:!0,onOnBack:h.onBack},null,8,["onOnBack"]),i("form",{onSubmit:t[17]||(t[17]=V((...s)=>h.handleSubmit&&h.handleSubmit(...s),["prevent"])),method:"post"},[i("div",R,[i("div",U,[i("div",z,[i("div",x,[i("div",D,[N,_(i("input",{type:"number",class:m(["form-control",{"is-invalid":e.errors.residentIdCard}]),"onUpdate:modelValue":t[0]||(t[0]=s=>e.form.residentIdCard=s),disabled:e.isLoading},null,10,j),[[f,e.form.residentIdCard]]),e.errors.residentIdCard?(r(!0),l(d,{key:0},a(e.errors.residentIdCard,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",E,[i("div",T,[K,_(i("select",{class:m(["form-select",{"is-invalid":e.errors.workingStatus}]),"onUpdate:modelValue":t[1]||(t[1]=s=>e.form.workingStatus=s),disabled:e.isLoading},F,10,M),[[p,e.form.workingStatus]]),e.errors.workingStatus?(r(!0),l(d,{key:0},a(e.errors.workingStatus,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",G,[i("div",J,[H,_(i("input",{type:"text",class:m(["form-control",{"is-invalid":e.errors.birthPlace}]),"onUpdate:modelValue":t[2]||(t[2]=s=>e.form.birthPlace=s),disabled:e.isLoading},null,10,q),[[f,e.form.birthPlace]]),e.errors.birthPlace?(r(!0),l(d,{key:0},a(e.errors.birthPlace,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",Q,[i("div",X,[Y,_(i("input",{type:"date",class:m(["form-control",{"is-invalid":e.errors.dateBirth}]),"onUpdate:modelValue":t[3]||(t[3]=s=>e.form.dateBirth=s),disabled:e.isLoading},null,10,Z),[[f,e.form.dateBirth]]),e.errors.dateBirth?(r(!0),l(d,{key:0},a(e.errors.dateBirth,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",ee,[i("div",se,[ie,i("select",{class:m(["select2-hidden-accessible form-select",{"is-invalid":e.errors.welderSkillIds}]),ref:"welderSkill",disabled:e.isLoading,multiple:""},null,10,te),e.errors.welderSkillIds?(r(!0),l(d,{key:0},a(e.errors.welderSkillIds,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",oe,[i("div",re,[le,_(i("select",{class:m(["form-select",{"is-invalid":e.errors.citizenship}]),"onUpdate:modelValue":t[4]||(t[4]=s=>e.form.citizenship=s),disabled:e.isLoading},ue,10,ne),[[p,e.form.citizenship]]),e.errors.citizenship?(r(!0),l(d,{key:0},a(e.errors.citizenship,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",me,[i("div",he,[_e,_(i("select",{class:m(["form-select",{"is-invalid":e.errors.province}]),"onUpdate:modelValue":t[5]||(t[5]=s=>e.form.province=s),disabled:e.isLoading,onChange:t[6]||(t[6]=s=>(e.isRegency=!1,h.getRegency(s)))},[fe,(r(!0),l(d,null,a(e.provinces,(s,n)=>(r(),l("option",{key:n,value:s.id},c(s.name),9,ve))),128))],42,pe),[[p,e.form.province]]),e.errors.province?(r(!0),l(d,{key:0},a(e.errors.province,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",be,[i("div",ge,[ke,_(i("select",{class:m(["form-select",{"is-invalid":e.errors.regency}]),"onUpdate:modelValue":t[7]||(t[7]=s=>e.form.regency=s),disabled:e.isLoading||e.isRegency,ref:"regency",onChange:t[8]||(t[8]=s=>(e.isDistrict=!1,h.getDistrict(s)))},[Ce,(r(!0),l(d,null,a(e.regencies,(s,n)=>(r(),l("option",{key:n,value:s.id},c(s.name),9,Se))),128))],42,ye),[[p,e.form.regency]]),e.errors.regency?(r(!0),l(d,{key:0},a(e.errors.regency,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",Pe,[i("div",we,[Ie,_(i("select",{class:m(["form-select",{"is-invalid":e.errors.district}]),"onUpdate:modelValue":t[9]||(t[9]=s=>e.form.district=s),disabled:e.isLoading||e.isDistrict,ref:"district",onChange:t[10]||(t[10]=s=>(e.isVillage=!1,h.getVillage(s)))},[Ve,(r(!0),l(d,null,a(e.districts,(s,n)=>(r(),l("option",{key:n,value:s.id},c(s.name),9,Be))),128))],42,Le),[[p,e.form.district]]),e.errors.district?(r(!0),l(d,{key:0},a(e.errors.district,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",Re,[i("div",Ue,[ze,_(i("select",{class:m(["form-select",{"is-invalid":e.errors.village}]),ref:"village","onUpdate:modelValue":t[11]||(t[11]=s=>e.form.village=s),disabled:e.isLoading||e.isVillage},[De,(r(!0),l(d,null,a(e.villages,(s,n)=>(r(),l("option",{key:n,value:s.id},c(s.name),9,Ne))),128))],10,xe),[[p,e.form.village]]),e.errors.village?(r(!0),l(d,{key:0},a(e.errors.village,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",je,[i("div",Ee,[Te,_(i("input",{type:"text",class:m(["form-control",{"is-invalid":e.errors.zipCode}]),"onUpdate:modelValue":t[12]||(t[12]=s=>e.form.zipCode=s),disabled:e.isLoading},null,10,Ke),[[f,e.form.zipCode]]),e.errors.zipCode?(r(!0),l(d,{key:0},a(e.errors.zipCode,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",Me,[i("div",Oe,[Ae,_(i("input",{type:"number",class:m(["form-control",{"is-invalid":e.errors.phone}]),"onUpdate:modelValue":t[13]||(t[13]=s=>e.form.phone=s),disabled:e.isLoading},null,10,We),[[f,e.form.phone]]),e.errors.phone?(r(!0),l(d,{key:0},a(e.errors.phone,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",Fe,[i("div",Ge,[Je,i("input",{type:"file",class:m(["form-control",{"is-invalid":e.errors.documentPasPhoto}]),disabled:e.isLoading,onChange:t[14]||(t[14]=(...s)=>h.uploadPasPhoto&&h.uploadPasPhoto(...s))},null,42,He),e.errors.documentPasPhoto?(r(!0),l(d,{key:0},a(e.errors.documentPasPhoto,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",qe,[i("div",Qe,[Xe,i("input",{type:"file",class:m(["form-control",{"is-invalid":e.errors.documentCertificateCompetency}]),disabled:e.isLoading,onChange:t[15]||(t[15]=(...s)=>h.uploadCertificateCompetency&&h.uploadCertificateCompetency(...s))},null,42,Ye),e.errors.documentCertificateCompetency?(r(!0),l(d,{key:0},a(e.errors.documentCertificateCompetency,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])]),i("div",Ze,[i("div",$e,[es,i("input",{type:"file",class:m(["form-control",{"is-invalid":e.errors.documentCurriculumVitae}]),disabled:e.isLoading,onChange:t[16]||(t[16]=(...s)=>h.uploadCurriculumVitae&&h.uploadCurriculumVitae(...s))},null,42,ss),e.errors.documentCurriculumVitae?(r(!0),l(d,{key:0},a(e.errors.documentCurriculumVitae,(s,n)=>(r(),l("div",{class:"invalid-feedback",key:n},c(s),1))),128)):u("",!0)])])])]),i("div",is,[b(y,{to:{name:"Member"},class:"btn btn-sm btn-secondary",disabled:e.isLoading},{default:L(()=>[g("Batal")]),_:1},8,["disabled"]),e.isLoading?u("",!0):(r(),l("button",ts," Simpan ")),e.isLoading?(r(),l("button",os,[rs,g(" Harap Tunggu... ")])):u("",!0)])])],32),b(C,{url:{name:"Dashboard"},msg:"data berhasil diregistrasi."},null,8,["msg"])],64)}const ms=w(B,[["render",ls]]);export{ms as default};
