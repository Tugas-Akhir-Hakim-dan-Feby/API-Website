import{L as O}from"./Loader-458840eb.js";import{P as x}from"./PageTitle-dd8cd3e7.js";import{S as E}from"./Success-7a258d69.js";import{U as v}from"./util-54581a61.js";import{d as W}from"./id-6bced1f6.js";import{_ as T,r as y,o,c as l,a as e,b as C,w as L,t as a,F as c,l as u,d as R,y as A,z as K,e as F,j as G,k as p,v as k,n as _,f as h,m as f,g as Y}from"./app-0637055f.js";const H={props:["registerJob"],data(){return{village:"",district:"",regency:"",province:""}},watch:{},methods:{getVillage(r){return fetch(`${this.$store.state.BASE_URL_REGION}village/${r}.json`).then(t=>t.json()).then(t=>{this.village=v.convertToCapitalize(t.name)}),this.village},getDistrict(r){return fetch(`${this.$store.state.BASE_URL_REGION}district/${r}.json`).then(t=>t.json()).then(t=>{this.district=v.convertToCapitalize(t.name)}),this.district},getRegency(r){return fetch(`${this.$store.state.BASE_URL_REGION}regency/${r}.json`).then(t=>t.json()).then(t=>{this.regency=v.convertToCapitalize(t.name)}),this.regency},getProvince(r){return fetch(`${this.$store.state.BASE_URL_REGION}province/${r}.json`).then(t=>t.json()).then(t=>{this.province=v.convertToCapitalize(t.name)}),this.province},getCitizenship(r){return v.getCitizenship(r)},getSkill(r){return v.convertToCapitalize(r)},getDateBirth(r){return W(r).locale("id").format("DD MMMM YYYY")},onRegister(){this.$emit("onRegister",!0)}}},g=r=>(A("data-v-5630339e"),r=r(),K(),r),q={class:"card"},Q={class:"card-body"},X={class:"row"},Z={class:"col-md-3 mb-3"},ee=["src","alt"],se={class:"col-md-9"},te={class:"table-responsive"},ie={class:"table table-hover table-bordered"},re=g(()=>e("th",{class:"p-2 border bg-primary"},"Nama",-1)),oe={class:"p-2 border"},le=g(()=>e("th",{class:"p-2 border bg-primary"},"No. KTP",-1)),ne={class:"p-2 border"},ae=g(()=>e("th",{class:"p-2 border bg-primary"}," Tempat, Tanggal Lahir ",-1)),de={class:"p-2 border"},ce=g(()=>e("th",{class:"p-2 border bg-primary"},"Alamat",-1)),ue={class:"p-2 border"},he=g(()=>e("th",{class:"p-2 border bg-primary"}," Kewarganegaraan ",-1)),me={class:"p-2 border"},_e=g(()=>e("th",{class:"p-2 border bg-primary"}," Keahlian Pelamar ",-1)),pe={class:"p-2 border"},be=g(()=>e("th",{class:"p-2 border bg-primary"}," Dokumen Pendukung ",-1)),ge={class:"p-2 border"},ve=["href"],fe=["href"],ye={class:"card-footer d-flex justify-content-between"};function ke(r,t,m,M,s,d){var S,P,i,n,B,V,N,z,U,j;const D=y("center"),I=y("router-link");return o(),l("div",q,[e("div",Q,[e("div",X,[e("div",Z,[C(D,null,{default:L(()=>{var b;return[e("img",{src:(b=m.registerJob.detailWorker)==null?void 0:b.pasPhoto,alt:m.registerJob.name,style:{width:"3cm",height:"4cm"}},null,8,ee)]}),_:1})]),e("div",se,[e("div",te,[e("table",ie,[e("tr",null,[re,e("td",oe,a(m.registerJob.name),1)]),e("tr",null,[le,e("td",ne,a((S=m.registerJob.detailWorker)==null?void 0:S.residentIdCard),1)]),e("tr",null,[ae,e("td",de,a(`${(P=m.registerJob.detailWorker)==null?void 0:P.birthPlace}, ${d.getDateBirth((i=m.registerJob.detailWorker)==null?void 0:i.dateBirth)}`),1)]),e("tr",null,[ce,e("td",ue,a(`desa ${d.getVillage((n=m.registerJob.personalData)==null?void 0:n.village)}, kec. ${d.getDistrict((B=m.registerJob.personalData)==null?void 0:B.district)}, kab. ${d.getRegency((V=m.registerJob.personalData)==null?void 0:V.regency)}, ${d.getProvince((N=m.registerJob.personalData)==null?void 0:N.province)}, ${(z=m.registerJob.personalData)==null?void 0:z.zipCode}`),1)]),e("tr",null,[he,e("td",me,a(d.getCitizenship((U=m.registerJob.personalData)==null?void 0:U.citizenship)),1)]),e("tr",null,[_e,e("td",pe,[e("ul",null,[(o(!0),l(c,null,u(m.registerJob.welderHasSkills,(b,w)=>{var J;return o(),l("li",{key:w},a(d.getSkill((J=b.welderSkill)==null?void 0:J.skillName)),1)}),128))])])]),e("tr",null,[be,e("td",ge,[e("ul",null,[e("li",null,[e("a",{href:(j=m.registerJob.personalData)==null?void 0:j.curriculumVitae,target:"_blank"},"CV",8,ve)]),(o(!0),l(c,null,u(m.registerJob.welderDocuments,(b,w)=>(o(),l("li",{key:w},[e("a",{href:b.documentPath,target:"_blank"},"Sertifikat Keahlian "+a(w+1),9,fe)]))),128))])])])])])])])]),e("div",ye,[C(I,{to:{name:"Member"},class:"btn btn-sm btn-secondary"},{default:L(()=>[R("Batal")]),_:1}),e("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=b=>d.onRegister())}," Daftar ")])])}const Ce=T(H,[["render",ke],["__scopeId","data-v-5630339e"]]),Se={components:{PageTitle:x,Success:E},data(){return{form:{welderSkillIds:[],residentIdCard:"",dateBirth:"",birthPlace:"",citizenship:"",village:"",district:"",regency:"",province:"",zipCode:"",phone:"",workingStatus:"",documentPasPhoto:"",documentCurriculumVitae:"",documentCertificateCompetency:""},welderSkills:[],errors:{},registerJob:{},isLoading:!1,isRegency:!0,isDistrict:!0,isVillage:!0,isNullDataPersonal:!1,provinces:[],regencies:[],districts:[],villages:[]}},mounted(){this.getUser(),this.selectUtil(),this.getProvince();let r=JSON.parse(localStorage.getItem("isPayment"));r&&this.$router.push({name:"Show Invoice",params:{externalId:r.externalId,costId:"welderMember"}})},computed:{formData(){let r=new FormData;for(let t=0;t<this.form.welderSkillIds.length;t++)r.append(`welder_skill_ids[${t}]`,this.form.welderSkillIds[t]);return r.append("resident_id_card",this.form.residentIdCard),r.append("date_birth",this.form.dateBirth),r.append("birth_place",this.form.birthPlace),r.append("citizenship",this.form.citizenship),r.append("village",this.form.village),r.append("district",this.form.district),r.append("regency",this.form.regency),r.append("province",this.form.province),r.append("zip_code",this.form.zipCode),r.append("phone",this.form.phone),r.append("document_curriculum_vitae",this.form.documentCurriculumVitae),r.append("working_status",this.form.workingStatus),r.append("document_pas_photo",this.form.documentPasPhoto),r.append("document_certificate_competency",this.form.documentCertificateCompetency),r}},methods:{getUser(){this.$store.dispatch("showData",["user","me"]).then(r=>{this.getDataPersonal(r.user)})},getDataPersonal(r){this.$store.dispatch("showData",["register-job",r.uuid]).then(t=>{this.registerJob=t.data,t.data&&(this.isNullDataPersonal=!1)}).catch(t=>{t.response.data.statusCode==404&&t.response.data.status=="WARNING"&&(this.isNullDataPersonal=!0)})},getProvince(){fetch(this.$store.state.BASE_URL_REGION+"provinces.json").then(r=>r.json()).then(r=>{this.provinces=r})},getRegency(r){fetch(`${this.$store.state.BASE_URL_REGION}regencies/${r.target.value}.json`).then(t=>t.json()).then(t=>{this.regencies=t,this.$refs.regency.value=""})},getDistrict(r){fetch(`${this.$store.state.BASE_URL_REGION}districts/${r.target.value}.json`).then(t=>t.json()).then(t=>{this.districts=t,this.$refs.district.value=""})},getVillage(r){fetch(`${this.$store.state.BASE_URL_REGION}villages/${r.target.value}.json`).then(t=>t.json()).then(t=>{this.villages=t,this.$refs.village.value=""})},onBack(){this.$router.push({name:"Member"})},handleSubmit(){return this.isNullDataPersonal?this.handleSubmitWithFrom():this.handleSubmitWithoutFrom()},handleSubmitWithoutFrom(){this.isLoading=!0,this.errors={},this.$store.dispatch("postData",["user/welder-member/store-member",{}]).then(r=>{this.isLoading=!1,localStorage.setItem("isPayment",JSON.stringify({paymentType:"welderMember",externalId:r.data.externalId})),window.location.href="/invoice/"+r.data.externalId+"/welderMember"}).catch(r=>{this.isLoading=!1,this.errors=r.response.data.messages,r.response.data.status=="ERROR"&&r.response.data.statusCode==500&&(this.isError=!0,this.msg=r.response.data.message)})},handleSubmitWithFrom(){this.isLoading=!0,this.errors={},this.$store.dispatch("postDataUpload",["user/welder-member",this.formData]).then(r=>{this.isLoading=!1,localStorage.setItem("isPayment",JSON.stringify({paymentType:"welderMember",externalId:r.data.externalId})),window.location.href="/invoice/"+r.data.externalId+"/welderMember"}).catch(r=>{this.isLoading=!1,this.errors=r.response.data.messages,r.response.data.status=="ERROR"&&r.response.data.statusCode==500&&(this.isError=!0,this.msg=r.response.data.message)})},selectUtil(){$(this.$refs.welderSkill).select2({ajax:{url:`${this.$store.state.BASE_URL}/api/v1/skill/welder`,dataType:"json",headers:{Authorization:"Bearer "+F.get("token")},delay:250,data:function(r){return{search:r.term,per_page:20}},processResults:function(r){return{results:r.data.map(t=>({id:t.uuid,text:t.skill_name}))}},cache:!0}}),$(this.$refs.welderSkill).on("change",()=>{this.form.welderSkillIds=$(this.$refs.welderSkill).val(),$(".select2-hidden-accessible").removeClass("is-invalid")})},uploadCurriculumVitae(r){this.form.documentCurriculumVitae=r.target.files[0]},uploadPasPhoto(r){this.form.documentPasPhoto=r.target.files[0]},uploadCertificateCompetency(r){this.form.documentCertificateCompetency=r.target.files[0]}},components:{DetailPersonal:Ce,PageTitle:x,Loader:O,Success:E}},Pe={class:"card"},we={class:"card-body"},De={class:"row"},Ie={class:"col-md-6"},Le={class:"mb-3"},Re=e("label",null,"NIK",-1),Be=["disabled"],Ve={class:"col-md-6"},Ne={class:"mb-3"},ze=e("label",null,"Status Bekerja",-1),Ue=["disabled"],je=e("option",{disabled:"",selected:""},null,-1),Je=e("option",{value:"1"},"Sudah Pernah Bekerja",-1),xe=e("option",{value:"0"},"Belum Pernah Bekerja",-1),Ee=[je,Je,xe],Te={class:"col-md-6"},Me={class:"mb-3"},Oe=e("label",null,"Tempat Lahir",-1),We=["disabled"],Ae={class:"col-md-6"},Ke={class:"mb-3"},Fe=e("label",null,"Tanggal Lahir",-1),Ge=["disabled"],Ye={class:"col-md-6"},He={class:"mb-3"},qe=e("label",null,"Jenis Kompetensi",-1),Qe=["disabled"],Xe={class:"col-md-6"},Ze={class:"mb-3"},$e=e("label",null,"Kewarganegaraan",-1),es=["disabled"],ss=e("option",{disabled:"",selected:""},null,-1),ts=e("option",{value:"WNI"}," Warga Negara Indonesia ",-1),is=e("option",{value:"WNA"},"Warga Negara Asing",-1),rs=[ss,ts,is],os={class:"col-md-6"},ls={class:"mb-3"},ns=e("label",null,"Provinsi",-1),as=["disabled"],ds=e("option",{disabled:"",selected:""},null,-1),cs=["value"],us={class:"col-md-6"},hs={class:"mb-3"},ms=e("label",null,"Kota/Kabupaten",-1),_s=["disabled"],ps=e("option",{disabled:"",selected:""},null,-1),bs=["value"],gs={class:"col-md-6"},vs={class:"mb-3"},fs=e("label",null,"Kecamatan",-1),ys=["disabled"],ks=e("option",{disabled:"",selected:""},null,-1),Cs=["value"],Ss={class:"col-md-6"},Ps={class:"mb-3"},ws=e("label",null,"Desa/Kelurahan",-1),Ds=["disabled"],Is=e("option",{disabled:"",selected:""},null,-1),Ls=["value"],Rs={class:"col-md-6"},Bs={class:"mb-3"},Vs=e("label",null,"Kode Pos",-1),Ns=["disabled"],zs={class:"col-md-6"},Us={class:"mb-3"},js=e("label",null,"No Telepon",-1),Js=["disabled"],xs={class:"col-md-6"},Es={class:"mb-3"},Ts=e("label",null,"Pas Foto Formal Berwarna",-1),Ms=["disabled"],Os={class:"col-md-6"},Ws={class:"mb-3"},As=e("label",null,"Sertifikat Pelatihan/Kompetensi Keahlian Pengelasan ",-1),Ks=["disabled"],Fs={class:"col-md-6"},Gs={class:"mb-3"},Ys=e("label",null,"Daftar Riwayat Hidup",-1),Hs=["disabled"],qs={class:"card-footer border-top d-flex justify-content-between"},Qs={key:0,class:"btn btn-sm btn-primary"},Xs={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},Zs=e("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function $s(r,t,m,M,s,d){const D=y("PageTitle"),I=y("router-link"),S=y("DetailPersonal"),P=y("Success");return o(),l(c,null,[C(D,{title:"Daftar Member Welder",isBack:!0,onOnBack:d.onBack},null,8,["onOnBack"]),s.isNullDataPersonal?(o(),l("form",{key:0,onSubmit:t[17]||(t[17]=G((...i)=>d.handleSubmit&&d.handleSubmit(...i),["prevent"])),method:"post"},[e("div",Pe,[e("div",we,[e("div",De,[e("div",Ie,[e("div",Le,[Re,p(e("input",{type:"number",class:_(["form-control",{"is-invalid":s.errors.residentIdCard}]),"onUpdate:modelValue":t[0]||(t[0]=i=>s.form.residentIdCard=i),disabled:s.isLoading},null,10,Be),[[k,s.form.residentIdCard]]),s.errors.residentIdCard?(o(!0),l(c,{key:0},u(s.errors.residentIdCard,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",Ve,[e("div",Ne,[ze,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.workingStatus}]),"onUpdate:modelValue":t[1]||(t[1]=i=>s.form.workingStatus=i),disabled:s.isLoading},Ee,10,Ue),[[f,s.form.workingStatus]]),s.errors.workingStatus?(o(!0),l(c,{key:0},u(s.errors.workingStatus,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",Te,[e("div",Me,[Oe,p(e("input",{type:"text",class:_(["form-control",{"is-invalid":s.errors.birthPlace}]),"onUpdate:modelValue":t[2]||(t[2]=i=>s.form.birthPlace=i),disabled:s.isLoading},null,10,We),[[k,s.form.birthPlace]]),s.errors.birthPlace?(o(!0),l(c,{key:0},u(s.errors.birthPlace,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",Ae,[e("div",Ke,[Fe,p(e("input",{type:"date",class:_(["form-control",{"is-invalid":s.errors.dateBirth}]),"onUpdate:modelValue":t[3]||(t[3]=i=>s.form.dateBirth=i),disabled:s.isLoading},null,10,Ge),[[k,s.form.dateBirth]]),s.errors.dateBirth?(o(!0),l(c,{key:0},u(s.errors.dateBirth,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",Ye,[e("div",He,[qe,e("select",{class:_(["select2-hidden-accessible form-select",{"is-invalid":s.errors.welderSkillIds}]),ref:"welderSkill",disabled:s.isLoading,multiple:""},null,10,Qe),s.errors.welderSkillIds?(o(!0),l(c,{key:0},u(s.errors.welderSkillIds,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",Xe,[e("div",Ze,[$e,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.citizenship}]),"onUpdate:modelValue":t[4]||(t[4]=i=>s.form.citizenship=i),disabled:s.isLoading},rs,10,es),[[f,s.form.citizenship]]),s.errors.citizenship?(o(!0),l(c,{key:0},u(s.errors.citizenship,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",os,[e("div",ls,[ns,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.province}]),"onUpdate:modelValue":t[5]||(t[5]=i=>s.form.province=i),disabled:s.isLoading,onChange:t[6]||(t[6]=i=>(s.isRegency=!1,d.getRegency(i)))},[ds,(o(!0),l(c,null,u(s.provinces,(i,n)=>(o(),l("option",{key:n,value:i.id},a(i.name),9,cs))),128))],42,as),[[f,s.form.province]]),s.errors.province?(o(!0),l(c,{key:0},u(s.errors.province,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",us,[e("div",hs,[ms,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.regency}]),"onUpdate:modelValue":t[7]||(t[7]=i=>s.form.regency=i),disabled:s.isLoading||s.isRegency,ref:"regency",onChange:t[8]||(t[8]=i=>(s.isDistrict=!1,d.getDistrict(i)))},[ps,(o(!0),l(c,null,u(s.regencies,(i,n)=>(o(),l("option",{key:n,value:i.id},a(i.name),9,bs))),128))],42,_s),[[f,s.form.regency]]),s.errors.regency?(o(!0),l(c,{key:0},u(s.errors.regency,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",gs,[e("div",vs,[fs,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.district}]),"onUpdate:modelValue":t[9]||(t[9]=i=>s.form.district=i),disabled:s.isLoading||s.isDistrict,ref:"district",onChange:t[10]||(t[10]=i=>(s.isVillage=!1,d.getVillage(i)))},[ks,(o(!0),l(c,null,u(s.districts,(i,n)=>(o(),l("option",{key:n,value:i.id},a(i.name),9,Cs))),128))],42,ys),[[f,s.form.district]]),s.errors.district?(o(!0),l(c,{key:0},u(s.errors.district,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",Ss,[e("div",Ps,[ws,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.village}]),ref:"village","onUpdate:modelValue":t[11]||(t[11]=i=>s.form.village=i),disabled:s.isLoading||s.isVillage},[Is,(o(!0),l(c,null,u(s.villages,(i,n)=>(o(),l("option",{key:n,value:i.id},a(i.name),9,Ls))),128))],10,Ds),[[f,s.form.village]]),s.errors.village?(o(!0),l(c,{key:0},u(s.errors.village,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",Rs,[e("div",Bs,[Vs,p(e("input",{type:"text",class:_(["form-control",{"is-invalid":s.errors.zipCode}]),"onUpdate:modelValue":t[12]||(t[12]=i=>s.form.zipCode=i),disabled:s.isLoading},null,10,Ns),[[k,s.form.zipCode]]),s.errors.zipCode?(o(!0),l(c,{key:0},u(s.errors.zipCode,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",zs,[e("div",Us,[js,p(e("input",{type:"number",class:_(["form-control",{"is-invalid":s.errors.phone}]),"onUpdate:modelValue":t[13]||(t[13]=i=>s.form.phone=i),disabled:s.isLoading},null,10,Js),[[k,s.form.phone]]),s.errors.phone?(o(!0),l(c,{key:0},u(s.errors.phone,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",xs,[e("div",Es,[Ts,e("input",{type:"file",class:_(["form-control",{"is-invalid":s.errors.documentPasPhoto}]),disabled:s.isLoading,onChange:t[14]||(t[14]=(...i)=>d.uploadPasPhoto&&d.uploadPasPhoto(...i))},null,42,Ms),s.errors.documentPasPhoto?(o(!0),l(c,{key:0},u(s.errors.documentPasPhoto,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",Os,[e("div",Ws,[As,e("input",{type:"file",class:_(["form-control",{"is-invalid":s.errors.documentCertificateCompetency}]),disabled:s.isLoading,onChange:t[15]||(t[15]=(...i)=>d.uploadCertificateCompetency&&d.uploadCertificateCompetency(...i))},null,42,Ks),s.errors.documentCertificateCompetency?(o(!0),l(c,{key:0},u(s.errors.documentCertificateCompetency,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])]),e("div",Fs,[e("div",Gs,[Ys,e("input",{type:"file",class:_(["form-control",{"is-invalid":s.errors.documentCurriculumVitae}]),disabled:s.isLoading,onChange:t[16]||(t[16]=(...i)=>d.uploadCurriculumVitae&&d.uploadCurriculumVitae(...i))},null,42,Hs),s.errors.documentCurriculumVitae?(o(!0),l(c,{key:0},u(s.errors.documentCurriculumVitae,(i,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(i),1))),128)):h("",!0)])])])]),e("div",qs,[C(I,{to:{name:"Member"},class:"btn btn-sm btn-secondary",disabled:s.isLoading},{default:L(()=>[R("Batal")]),_:1},8,["disabled"]),s.isLoading?h("",!0):(o(),l("button",Qs," Simpan ")),s.isLoading?(o(),l("button",Xs,[Zs,R(" Harap Tunggu... ")])):h("",!0)])])],32)):(o(),Y(S,{key:1,registerJob:s.registerJob,onOnRegister:t[18]||(t[18]=i=>d.handleSubmit())},null,8,["registerJob"])),C(P,{url:{name:"Dashboard"},msg:"data berhasil diregistrasi."},null,8,["msg"])],64)}const lt=T(Se,[["render",$s]]);export{lt as default};
