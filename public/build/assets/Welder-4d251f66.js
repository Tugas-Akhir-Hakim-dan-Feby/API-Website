import{L as O}from"./Loader-f854f6af.js";import{P as x}from"./PageTitle-598f0528.js";import{S as E}from"./Success-c1d5e79e.js";import{U as f}from"./util-54581a61.js";import{d as W}from"./id-40f3cb37.js";import{_ as T,r as y,o,c as l,a as e,b as C,w as L,t as a,F as c,l as u,d as R,y as A,z as K,e as G,j as F,k as p,v as k,n as _,f as h,m as v,g as Y}from"./app-0b4e2ce8.js";const H={props:["registerJob"],data(){return{village:"",district:"",regency:"",province:""}},watch:{},methods:{getVillage(i){return fetch(`${this.$store.state.BASE_URL_REGION}village/${i}.json`).then(t=>t.json()).then(t=>{this.village=f.convertToCapitalize(t.name)}),this.village},getDistrict(i){return fetch(`${this.$store.state.BASE_URL_REGION}district/${i}.json`).then(t=>t.json()).then(t=>{this.district=f.convertToCapitalize(t.name)}),this.district},getRegency(i){return fetch(`${this.$store.state.BASE_URL_REGION}regency/${i}.json`).then(t=>t.json()).then(t=>{this.regency=f.convertToCapitalize(t.name)}),this.regency},getProvince(i){return fetch(`${this.$store.state.BASE_URL_REGION}province/${i}.json`).then(t=>t.json()).then(t=>{this.province=f.convertToCapitalize(t.name)}),this.province},getCitizenship(i){return f.getCitizenship(i)},getSkill(i){return f.convertToCapitalize(i)},getDateBirth(i){return W(i).locale("id").format("DD MMMM YYYY")},onRegister(){this.$emit("onRegister",!0)}}},b=i=>(A("data-v-5630339e"),i=i(),K(),i),q={class:"card"},Q={class:"card-body"},X={class:"row"},Z={class:"col-md-3 mb-3"},ee=["src","alt"],se={class:"col-md-9"},te={class:"table-responsive"},ie={class:"table table-hover table-bordered"},re=b(()=>e("th",{class:"p-2 border bg-primary"},"Nama",-1)),oe={class:"p-2 border"},le=b(()=>e("th",{class:"p-2 border bg-primary"},"No. KTP",-1)),ne={class:"p-2 border"},ae=b(()=>e("th",{class:"p-2 border bg-primary"}," Tempat, Tanggal Lahir ",-1)),de={class:"p-2 border"},ce=b(()=>e("th",{class:"p-2 border bg-primary"},"Alamat",-1)),ue={class:"p-2 border"},he=b(()=>e("th",{class:"p-2 border bg-primary"}," Kewarganegaraan ",-1)),me={class:"p-2 border"},_e=b(()=>e("th",{class:"p-2 border bg-primary"}," Keahlian Pelamar ",-1)),pe={class:"p-2 border"},ge=b(()=>e("th",{class:"p-2 border bg-primary"}," Dokumen Pendukung ",-1)),be={class:"p-2 border"},fe=["href"],ve=["href"],ye={class:"card-footer d-flex justify-content-between"};function ke(i,t,m,M,s,d){var P,S,r,n,B,N,V,z,J,U;const D=y("center"),I=y("router-link");return o(),l("div",q,[e("div",Q,[e("div",X,[e("div",Z,[C(D,null,{default:L(()=>{var g;return[e("img",{src:(g=m.registerJob.detailWorker)==null?void 0:g.pasPhoto,alt:m.registerJob.name,style:{width:"3cm",height:"4cm"}},null,8,ee)]}),_:1})]),e("div",se,[e("div",te,[e("table",ie,[e("tr",null,[re,e("td",oe,a(m.registerJob.name),1)]),e("tr",null,[le,e("td",ne,a((P=m.registerJob.detailWorker)==null?void 0:P.residentIdCard),1)]),e("tr",null,[ae,e("td",de,a(`${(S=m.registerJob.detailWorker)==null?void 0:S.birthPlace}, ${d.getDateBirth((r=m.registerJob.detailWorker)==null?void 0:r.dateBirth)}`),1)]),e("tr",null,[ce,e("td",ue,a(`desa ${d.getVillage((n=m.registerJob.personalData)==null?void 0:n.village)}, kec. ${d.getDistrict((B=m.registerJob.personalData)==null?void 0:B.district)}, kab. ${d.getRegency((N=m.registerJob.personalData)==null?void 0:N.regency)}, ${d.getProvince((V=m.registerJob.personalData)==null?void 0:V.province)}, ${(z=m.registerJob.personalData)==null?void 0:z.zipCode}`),1)]),e("tr",null,[he,e("td",me,a(d.getCitizenship((J=m.registerJob.personalData)==null?void 0:J.citizenship)),1)]),e("tr",null,[_e,e("td",pe,[e("ul",null,[(o(!0),l(c,null,u(m.registerJob.welderHasSkills,(g,w)=>{var j;return o(),l("li",{key:w},a(d.getSkill((j=g.welderSkill)==null?void 0:j.skillName)),1)}),128))])])]),e("tr",null,[ge,e("td",be,[e("ul",null,[e("li",null,[e("a",{href:(U=m.registerJob.personalData)==null?void 0:U.curriculumVitae,target:"_blank"},"CV",8,fe)]),(o(!0),l(c,null,u(m.registerJob.welderDocuments,(g,w)=>(o(),l("li",{key:w},[e("a",{href:g.documentPath,target:"_blank"},"Sertifikat Keahlian "+a(w+1),9,ve)]))),128))])])])])])])])]),e("div",ye,[C(I,{to:{name:"Member"},class:"btn btn-sm btn-secondary"},{default:L(()=>[R("Batal")]),_:1}),e("button",{class:"btn btn-sm btn-primary",onClick:t[0]||(t[0]=g=>d.onRegister())}," Daftar ")])])}const Ce=T(H,[["render",ke],["__scopeId","data-v-5630339e"]]),Pe={components:{PageTitle:x,Success:E},data(){return{form:{welderSkillIds:[],residentIdCard:"",dateBirth:"",birthPlace:"",citizenship:"",village:"",district:"",regency:"",province:"",zipCode:"",phone:"",workingStatus:"",documentPasPhoto:"",documentCurriculumVitae:"",documentCertificateCompetency:""},welderSkills:[],errors:{},registerJob:{},isLoading:!1,isRegency:!0,isDistrict:!0,isVillage:!0,isNullDataPersonal:!1,provinces:[],regencies:[],districts:[],villages:[]}},mounted(){this.getUser(),this.selectUtil(),this.getProvince();let i=JSON.parse(localStorage.getItem("isPayment"));i&&this.$router.push({name:"Show Invoice",params:{externalId:i.externalId,costId:"welderMember"}})},computed:{formData(){let i=new FormData;for(let t=0;t<this.form.welderSkillIds.length;t++)i.append(`welder_skill_ids[${t}]`,this.form.welderSkillIds[t]);return i.append("resident_id_card",this.form.residentIdCard),i.append("date_birth",this.form.dateBirth),i.append("birth_place",this.form.birthPlace),i.append("citizenship",this.form.citizenship),i.append("village",this.form.village),i.append("district",this.form.district),i.append("regency",this.form.regency),i.append("province",this.form.province),i.append("zip_code",this.form.zipCode),i.append("phone",this.form.phone),i.append("document_curriculum_vitae",this.form.documentCurriculumVitae),i.append("working_status",this.form.workingStatus),i.append("document_pas_photo",this.form.documentPasPhoto),i.append("document_certificate_competency",this.form.documentCertificateCompetency),i}},methods:{getUser(){this.$store.dispatch("showData",["user","me"]).then(i=>{this.getPersonalData(i.user),this.getRegisterJob(i.user)})},getRegisterJob(i){this.$store.dispatch("showData",["register-job",i.uuid]).then(t=>{t.data&&(this.isNullDataPersonal=!1,this.registerJob=t.data)}).catch(t=>{t.response.data.statusCode==404&&t.response.data.status=="WARNING"&&(this.isNullDataPersonal=!0)})},getPersonalData(i){this.$store.dispatch("showData",["user/personal-data",i.uuid]).then(t=>{t.data&&(this.isNullDataPersonal=!1)}).catch(t=>{t.response.data.statusCode==404&&t.response.data.status=="WARNING"&&(this.isNullDataPersonal=!0)})},getProvince(){fetch(this.$store.state.BASE_URL_REGION+"provinces.json").then(i=>i.json()).then(i=>{this.provinces=i})},getRegency(i){fetch(`${this.$store.state.BASE_URL_REGION}regencies/${i.target.value}.json`).then(t=>t.json()).then(t=>{this.regencies=t,this.$refs.regency.value=""})},getDistrict(i){fetch(`${this.$store.state.BASE_URL_REGION}districts/${i.target.value}.json`).then(t=>t.json()).then(t=>{this.districts=t,this.$refs.district.value=""})},getVillage(i){fetch(`${this.$store.state.BASE_URL_REGION}villages/${i.target.value}.json`).then(t=>t.json()).then(t=>{this.villages=t,this.$refs.village.value=""})},onBack(){this.$router.push({name:"Member"})},handleSubmit(){return this.isNullDataPersonal?this.handleSubmitWithFrom():this.handleSubmitWithoutFrom()},handleSubmitWithoutFrom(){this.isLoading=!0,this.errors={},this.$store.dispatch("postData",["user/welder-member/store-member",{}]).then(i=>{this.isLoading=!1,localStorage.setItem("isPayment",JSON.stringify({paymentType:"welderMember",externalId:i.data.externalId})),window.location.href="/invoice/"+i.data.externalId+"/welderMember"}).catch(i=>{this.isLoading=!1,this.errors=i.response.data.messages,i.response.data.status=="ERROR"&&i.response.data.statusCode==500&&(this.isError=!0,this.msg=i.response.data.message)})},handleSubmitWithFrom(){this.isLoading=!0,this.errors={},this.$store.dispatch("postDataUpload",["user/welder-member",this.formData]).then(i=>{this.isLoading=!1,localStorage.setItem("isPayment",JSON.stringify({paymentType:"welderMember",externalId:i.data.externalId})),window.location.href="/invoice/"+i.data.externalId+"/welderMember"}).catch(i=>{this.isLoading=!1,this.errors=i.response.data.messages,i.response.data.status=="ERROR"&&i.response.data.statusCode==500&&(this.isError=!0,this.msg=i.response.data.message)})},selectUtil(){$(this.$refs.welderSkill).select2({ajax:{url:`${this.$store.state.BASE_URL}/api/v1/skill/welder`,dataType:"json",headers:{Authorization:"Bearer "+G.get("token")},delay:250,data:function(i){return{search:i.term,per_page:20}},processResults:function(i){return{results:i.data.map(t=>({id:t.uuid,text:t.skill_name}))}},cache:!0}}),$(this.$refs.welderSkill).on("change",()=>{this.form.welderSkillIds=$(this.$refs.welderSkill).val(),$(".select2-hidden-accessible").removeClass("is-invalid")})},uploadCurriculumVitae(i){this.form.documentCurriculumVitae=i.target.files[0]},uploadPasPhoto(i){this.form.documentPasPhoto=i.target.files[0]},uploadCertificateCompetency(i){this.form.documentCertificateCompetency=i.target.files[0]}},components:{DetailPersonal:Ce,PageTitle:x,Loader:O,Success:E}},Se={class:"card"},we={class:"card-body"},De={class:"row"},Ie={class:"col-md-6"},Le={class:"mb-3"},Re=e("label",null,"NIK",-1),Be=["disabled"],Ne={class:"col-md-6"},Ve={class:"mb-3"},ze=e("label",null,"Status Bekerja",-1),Je=["disabled"],Ue=e("option",{disabled:"",selected:""},null,-1),je=e("option",{value:"1"},"Sudah Pernah Bekerja",-1),xe=e("option",{value:"0"},"Belum Pernah Bekerja",-1),Ee=[Ue,je,xe],Te={class:"col-md-6"},Me={class:"mb-3"},Oe=e("label",null,"Tempat Lahir",-1),We=["disabled"],Ae={class:"col-md-6"},Ke={class:"mb-3"},Ge=e("label",null,"Tanggal Lahir",-1),Fe=["disabled"],Ye={class:"col-md-6"},He={class:"mb-3"},qe=e("label",null,"Jenis Kompetensi",-1),Qe=["disabled"],Xe={class:"col-md-6"},Ze={class:"mb-3"},$e=e("label",null,"Kewarganegaraan",-1),es=["disabled"],ss=e("option",{disabled:"",selected:""},null,-1),ts=e("option",{value:"WNI"}," Warga Negara Indonesia ",-1),is=e("option",{value:"WNA"},"Warga Negara Asing",-1),rs=[ss,ts,is],os={class:"col-md-6"},ls={class:"mb-3"},ns=e("label",null,"Provinsi",-1),as=["disabled"],ds=e("option",{disabled:"",selected:""},null,-1),cs=["value"],us={class:"col-md-6"},hs={class:"mb-3"},ms=e("label",null,"Kota/Kabupaten",-1),_s=["disabled"],ps=e("option",{disabled:"",selected:""},null,-1),gs=["value"],bs={class:"col-md-6"},fs={class:"mb-3"},vs=e("label",null,"Kecamatan",-1),ys=["disabled"],ks=e("option",{disabled:"",selected:""},null,-1),Cs=["value"],Ps={class:"col-md-6"},Ss={class:"mb-3"},ws=e("label",null,"Desa/Kelurahan",-1),Ds=["disabled"],Is=e("option",{disabled:"",selected:""},null,-1),Ls=["value"],Rs={class:"col-md-6"},Bs={class:"mb-3"},Ns=e("label",null,"Kode Pos",-1),Vs=["disabled"],zs={class:"col-md-6"},Js={class:"mb-3"},Us=e("label",null,"No Telepon",-1),js=["disabled"],xs={class:"col-md-6"},Es={class:"mb-3"},Ts=e("label",null,"Pas Foto Formal Berwarna",-1),Ms=["disabled"],Os={class:"col-md-6"},Ws={class:"mb-3"},As=e("label",null,"Sertifikat Pelatihan/Kompetensi Keahlian Pengelasan ",-1),Ks=["disabled"],Gs={class:"col-md-6"},Fs={class:"mb-3"},Ys=e("label",null,"Daftar Riwayat Hidup",-1),Hs=["disabled"],qs={class:"card-footer border-top d-flex justify-content-between"},Qs={key:0,class:"btn btn-sm btn-primary"},Xs={key:1,class:"btn btn-sm btn-primary",type:"button",disabled:""},Zs=e("span",{class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},null,-1);function $s(i,t,m,M,s,d){const D=y("PageTitle"),I=y("router-link"),P=y("DetailPersonal"),S=y("Success");return o(),l(c,null,[C(D,{title:"Daftar Member Welder",isBack:!0,onOnBack:d.onBack},null,8,["onOnBack"]),s.isNullDataPersonal?(o(),l("form",{key:0,onSubmit:t[17]||(t[17]=F((...r)=>d.handleSubmit&&d.handleSubmit(...r),["prevent"])),method:"post"},[e("div",Se,[e("div",we,[e("div",De,[e("div",Ie,[e("div",Le,[Re,p(e("input",{type:"number",class:_(["form-control",{"is-invalid":s.errors.residentIdCard}]),"onUpdate:modelValue":t[0]||(t[0]=r=>s.form.residentIdCard=r),disabled:s.isLoading},null,10,Be),[[k,s.form.residentIdCard]]),s.errors.residentIdCard?(o(!0),l(c,{key:0},u(s.errors.residentIdCard,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",Ne,[e("div",Ve,[ze,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.workingStatus}]),"onUpdate:modelValue":t[1]||(t[1]=r=>s.form.workingStatus=r),disabled:s.isLoading},Ee,10,Je),[[v,s.form.workingStatus]]),s.errors.workingStatus?(o(!0),l(c,{key:0},u(s.errors.workingStatus,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",Te,[e("div",Me,[Oe,p(e("input",{type:"text",class:_(["form-control",{"is-invalid":s.errors.birthPlace}]),"onUpdate:modelValue":t[2]||(t[2]=r=>s.form.birthPlace=r),disabled:s.isLoading},null,10,We),[[k,s.form.birthPlace]]),s.errors.birthPlace?(o(!0),l(c,{key:0},u(s.errors.birthPlace,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",Ae,[e("div",Ke,[Ge,p(e("input",{type:"date",class:_(["form-control",{"is-invalid":s.errors.dateBirth}]),"onUpdate:modelValue":t[3]||(t[3]=r=>s.form.dateBirth=r),disabled:s.isLoading},null,10,Fe),[[k,s.form.dateBirth]]),s.errors.dateBirth?(o(!0),l(c,{key:0},u(s.errors.dateBirth,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",Ye,[e("div",He,[qe,e("select",{class:_(["select2-hidden-accessible form-select",{"is-invalid":s.errors.welderSkillIds}]),ref:"welderSkill",disabled:s.isLoading,multiple:""},null,10,Qe),s.errors.welderSkillIds?(o(!0),l(c,{key:0},u(s.errors.welderSkillIds,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",Xe,[e("div",Ze,[$e,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.citizenship}]),"onUpdate:modelValue":t[4]||(t[4]=r=>s.form.citizenship=r),disabled:s.isLoading},rs,10,es),[[v,s.form.citizenship]]),s.errors.citizenship?(o(!0),l(c,{key:0},u(s.errors.citizenship,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",os,[e("div",ls,[ns,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.province}]),"onUpdate:modelValue":t[5]||(t[5]=r=>s.form.province=r),disabled:s.isLoading,onChange:t[6]||(t[6]=r=>(s.isRegency=!1,d.getRegency(r)))},[ds,(o(!0),l(c,null,u(s.provinces,(r,n)=>(o(),l("option",{key:n,value:r.id},a(r.name),9,cs))),128))],42,as),[[v,s.form.province]]),s.errors.province?(o(!0),l(c,{key:0},u(s.errors.province,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",us,[e("div",hs,[ms,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.regency}]),"onUpdate:modelValue":t[7]||(t[7]=r=>s.form.regency=r),disabled:s.isLoading||s.isRegency,ref:"regency",onChange:t[8]||(t[8]=r=>(s.isDistrict=!1,d.getDistrict(r)))},[ps,(o(!0),l(c,null,u(s.regencies,(r,n)=>(o(),l("option",{key:n,value:r.id},a(r.name),9,gs))),128))],42,_s),[[v,s.form.regency]]),s.errors.regency?(o(!0),l(c,{key:0},u(s.errors.regency,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",bs,[e("div",fs,[vs,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.district}]),"onUpdate:modelValue":t[9]||(t[9]=r=>s.form.district=r),disabled:s.isLoading||s.isDistrict,ref:"district",onChange:t[10]||(t[10]=r=>(s.isVillage=!1,d.getVillage(r)))},[ks,(o(!0),l(c,null,u(s.districts,(r,n)=>(o(),l("option",{key:n,value:r.id},a(r.name),9,Cs))),128))],42,ys),[[v,s.form.district]]),s.errors.district?(o(!0),l(c,{key:0},u(s.errors.district,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",Ps,[e("div",Ss,[ws,p(e("select",{class:_(["form-select",{"is-invalid":s.errors.village}]),ref:"village","onUpdate:modelValue":t[11]||(t[11]=r=>s.form.village=r),disabled:s.isLoading||s.isVillage},[Is,(o(!0),l(c,null,u(s.villages,(r,n)=>(o(),l("option",{key:n,value:r.id},a(r.name),9,Ls))),128))],10,Ds),[[v,s.form.village]]),s.errors.village?(o(!0),l(c,{key:0},u(s.errors.village,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",Rs,[e("div",Bs,[Ns,p(e("input",{type:"text",class:_(["form-control",{"is-invalid":s.errors.zipCode}]),"onUpdate:modelValue":t[12]||(t[12]=r=>s.form.zipCode=r),disabled:s.isLoading},null,10,Vs),[[k,s.form.zipCode]]),s.errors.zipCode?(o(!0),l(c,{key:0},u(s.errors.zipCode,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",zs,[e("div",Js,[Us,p(e("input",{type:"number",class:_(["form-control",{"is-invalid":s.errors.phone}]),"onUpdate:modelValue":t[13]||(t[13]=r=>s.form.phone=r),disabled:s.isLoading},null,10,js),[[k,s.form.phone]]),s.errors.phone?(o(!0),l(c,{key:0},u(s.errors.phone,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",xs,[e("div",Es,[Ts,e("input",{type:"file",class:_(["form-control",{"is-invalid":s.errors.documentPasPhoto}]),disabled:s.isLoading,onChange:t[14]||(t[14]=(...r)=>d.uploadPasPhoto&&d.uploadPasPhoto(...r))},null,42,Ms),s.errors.documentPasPhoto?(o(!0),l(c,{key:0},u(s.errors.documentPasPhoto,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",Os,[e("div",Ws,[As,e("input",{type:"file",class:_(["form-control",{"is-invalid":s.errors.documentCertificateCompetency}]),disabled:s.isLoading,onChange:t[15]||(t[15]=(...r)=>d.uploadCertificateCompetency&&d.uploadCertificateCompetency(...r))},null,42,Ks),s.errors.documentCertificateCompetency?(o(!0),l(c,{key:0},u(s.errors.documentCertificateCompetency,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])]),e("div",Gs,[e("div",Fs,[Ys,e("input",{type:"file",class:_(["form-control",{"is-invalid":s.errors.documentCurriculumVitae}]),disabled:s.isLoading,onChange:t[16]||(t[16]=(...r)=>d.uploadCurriculumVitae&&d.uploadCurriculumVitae(...r))},null,42,Hs),s.errors.documentCurriculumVitae?(o(!0),l(c,{key:0},u(s.errors.documentCurriculumVitae,(r,n)=>(o(),l("div",{class:"invalid-feedback",key:n},a(r),1))),128)):h("",!0)])])])]),e("div",qs,[C(I,{to:{name:"Member"},class:"btn btn-sm btn-secondary",disabled:s.isLoading},{default:L(()=>[R("Batal")]),_:1},8,["disabled"]),s.isLoading?h("",!0):(o(),l("button",Qs," Simpan ")),s.isLoading?(o(),l("button",Xs,[Zs,R(" Harap Tunggu... ")])):h("",!0)])])],32)):(o(),Y(P,{key:1,registerJob:s.registerJob,onOnRegister:t[18]||(t[18]=r=>d.handleSubmit())},null,8,["registerJob"])),C(S,{url:{name:"Dashboard"},msg:"data berhasil diregistrasi."},null,8,["msg"])],64)}const lt=T(Pe,[["render",$s]]);export{lt as default};
